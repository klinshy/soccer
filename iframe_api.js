"use strict";var Nr=Object.defineProperty;var Vr=(n,e,t)=>e in n?Nr(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var c=(n,e,t)=>(Vr(n,typeof e!="symbol"?e+"":e,t),t);const Le={};function E(n){return Le[n.type]===void 0&&(Le[n.type]=[]),Le[n.type].push(n.callback),n}var x;(function(n){n.assertEqual=s=>s;function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},n.getValidEnumValues=s=>{const i=n.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),o={};for(const l of i)o[l]=s[l];return n.objectValues(o)},n.objectValues=s=>n.objectKeys(s).map(function(i){return s[i]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},n.find=(s,i)=>{for(const o of s)if(i(o))return o},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function a(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}n.joinValues=a,n.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(x||(x={}));var ft;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(ft||(ft={}));const m=x.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),z=n=>{switch(typeof n){case"undefined":return m.undefined;case"string":return m.string;case"number":return isNaN(n)?m.nan:m.number;case"boolean":return m.boolean;case"function":return m.function;case"bigint":return m.bigint;case"symbol":return m.symbol;case"object":return Array.isArray(n)?m.array:n===null?m.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?m.promise:typeof Map<"u"&&n instanceof Map?m.map:typeof Set<"u"&&n instanceof Set?m.set:typeof Date<"u"&&n instanceof Date?m.date:m.object;default:return m.unknown}},u=x.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Br=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class I extends Error{constructor(e){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(i){return i.message},a={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)a._errors.push(t(o));else{let l=a,d=0;for(;d<o.path.length;){const p=o.path[d];d===o.path.length-1?(l[p]=l[p]||{_errors:[]},l[p]._errors.push(t(o))):l[p]=l[p]||{_errors:[]},l=l[p],d++}}};return s(this),a}static assert(e){if(!(e instanceof I))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,x.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},a=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):a.push(e(s));return{formErrors:a,fieldErrors:t}}get formErrors(){return this.flatten()}}I.create=n=>new I(n);const ne=(n,e)=>{let t;switch(n.code){case u.invalid_type:n.received===m.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case u.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,x.jsonStringifyReplacer)}`;break;case u.unrecognized_keys:t=`Unrecognized key(s) in object: ${x.joinValues(n.keys,", ")}`;break;case u.invalid_union:t="Invalid input";break;case u.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${x.joinValues(n.options)}`;break;case u.invalid_enum_value:t=`Invalid enum value. Expected ${x.joinValues(n.options)}, received '${n.received}'`;break;case u.invalid_arguments:t="Invalid function arguments";break;case u.invalid_return_type:t="Invalid function return type";break;case u.invalid_date:t="Invalid date";break;case u.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:x.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case u.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case u.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case u.custom:t="Invalid input";break;case u.invalid_intersection_types:t="Intersection results could not be merged";break;case u.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case u.not_finite:t="Number must be finite";break;default:t=e.defaultError,x.assertNever(n)}return{message:t}};let hr=ne;function zr(n){hr=n}function Ve(){return hr}const Be=n=>{const{data:e,path:t,errorMaps:a,issueData:s}=n,i=[...t,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let l="";const d=a.filter(p=>!!p).slice().reverse();for(const p of d)l=p(o,{data:e,defaultError:l}).message;return{...s,path:i,message:l}},Dr=[];function f(n,e){const t=Ve(),a=Be({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===ne?void 0:ne].filter(s=>!!s)});n.common.issues.push(a)}class A{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const a=[];for(const s of t){if(s.status==="aborted")return v;s.status==="dirty"&&e.dirty(),a.push(s.value)}return{status:e.value,value:a}}static async mergeObjectAsync(e,t){const a=[];for(const s of t){const i=await s.key,o=await s.value;a.push({key:i,value:o})}return A.mergeObjectSync(e,a)}static mergeObjectSync(e,t){const a={};for(const s of t){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return v;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(a[i.value]=o.value)}return{status:e.value,value:a}}}const v=Object.freeze({status:"aborted"}),ee=n=>({status:"dirty",value:n}),M=n=>({status:"valid",value:n}),mt=n=>n.status==="aborted",yt=n=>n.status==="dirty",ye=n=>n.status==="valid",be=n=>typeof Promise<"u"&&n instanceof Promise;function ze(n,e,t,a){if(t==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?a:t==="a"?a.call(n):a?a.value:e.get(n)}function pr(n,e,t,a,s){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t}var y;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(y||(y={}));var ue,he;class L{constructor(e,t,a,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=a,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Ot=(n,e)=>{if(ye(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new I(n.common.issues);return this._error=t,this._error}}};function _(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:a,description:s}=n;if(e&&(t||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,l)=>{var d,p;const{message:b}=n;return o.code==="invalid_enum_value"?{message:b!=null?b:l.defaultError}:typeof l.data>"u"?{message:(d=b!=null?b:a)!==null&&d!==void 0?d:l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:(p=b!=null?b:t)!==null&&p!==void 0?p:l.defaultError}},description:s}}class k{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return z(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:z(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new A,ctx:{common:e.parent.common,data:e.data,parsedType:z(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(be(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const a=this.safeParse(e,t);if(a.success)return a.data;throw a.error}safeParse(e,t){var a;const s={common:{issues:[],async:(a=t==null?void 0:t.async)!==null&&a!==void 0?a:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:z(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Ot(s,i)}async parseAsync(e,t){const a=await this.safeParseAsync(e,t);if(a.success)return a.data;throw a.error}async safeParseAsync(e,t){const a={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:z(e)},s=this._parse({data:e,path:a.path,parent:a}),i=await(be(s)?s:Promise.resolve(s));return Ot(a,i)}refine(e,t){const a=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{const o=e(s),l=()=>i.addIssue({code:u.custom,...a(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(d=>d?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,t){return this._refinement((a,s)=>e(a)?!0:(s.addIssue(typeof t=="function"?t(a,s):t),!1))}_refinement(e){return new Z({schema:this,typeName:g.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return U.create(this,this._def)}nullable(){return Y.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return O.create(this,this._def)}promise(){return ie.create(this,this._def)}or(e){return we.create([this,e],this._def)}and(e){return ke.create(this,e,this._def)}transform(e){return new Z({..._(this._def),schema:this,typeName:g.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Pe({..._(this._def),innerType:this,defaultValue:t,typeName:g.ZodDefault})}brand(){return new Mt({typeName:g.ZodBranded,type:this,..._(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Ce({..._(this._def),innerType:this,catchValue:t,typeName:g.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Me.create(this,e)}readonly(){return Te.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const $r=/^c[^\s-]{8,}$/i,qr=/^[0-9a-z]+$/,Yr=/^[0-9A-HJKMNP-TV-Z]{26}$/,Hr=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Jr=/^[a-z0-9_-]{21}$/i,Kr=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Fr=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Gr="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Qe;const Xr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Qr=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ea=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,fr="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ta=new RegExp(`^${fr}$`);function mr(n){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`),e}function ra(n){return new RegExp(`^${mr(n)}$`)}function yr(n){let e=`${fr}T${mr(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function aa(n,e){return!!((e==="v4"||!e)&&Xr.test(n)||(e==="v6"||!e)&&Qr.test(n))}class R extends k{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==m.string){const i=this._getOrReturnCtx(e);return f(i,{code:u.invalid_type,expected:m.string,received:i.parsedType}),v}const a=new A;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),f(s,{code:u.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),a.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),f(s,{code:u.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),a.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,l=e.data.length<i.value;(o||l)&&(s=this._getOrReturnCtx(e,s),o?f(s,{code:u.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&f(s,{code:u.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),a.dirty())}else if(i.kind==="email")Fr.test(e.data)||(s=this._getOrReturnCtx(e,s),f(s,{validation:"email",code:u.invalid_string,message:i.message}),a.dirty());else if(i.kind==="emoji")Qe||(Qe=new RegExp(Gr,"u")),Qe.test(e.data)||(s=this._getOrReturnCtx(e,s),f(s,{validation:"emoji",code:u.invalid_string,message:i.message}),a.dirty());else if(i.kind==="uuid")Hr.test(e.data)||(s=this._getOrReturnCtx(e,s),f(s,{validation:"uuid",code:u.invalid_string,message:i.message}),a.dirty());else if(i.kind==="nanoid")Jr.test(e.data)||(s=this._getOrReturnCtx(e,s),f(s,{validation:"nanoid",code:u.invalid_string,message:i.message}),a.dirty());else if(i.kind==="cuid")$r.test(e.data)||(s=this._getOrReturnCtx(e,s),f(s,{validation:"cuid",code:u.invalid_string,message:i.message}),a.dirty());else if(i.kind==="cuid2")qr.test(e.data)||(s=this._getOrReturnCtx(e,s),f(s,{validation:"cuid2",code:u.invalid_string,message:i.message}),a.dirty());else if(i.kind==="ulid")Yr.test(e.data)||(s=this._getOrReturnCtx(e,s),f(s,{validation:"ulid",code:u.invalid_string,message:i.message}),a.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),f(s,{validation:"url",code:u.invalid_string,message:i.message}),a.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),f(s,{validation:"regex",code:u.invalid_string,message:i.message}),a.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),f(s,{code:u.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),a.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),f(s,{code:u.invalid_string,validation:{startsWith:i.value},message:i.message}),a.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),f(s,{code:u.invalid_string,validation:{endsWith:i.value},message:i.message}),a.dirty()):i.kind==="datetime"?yr(i).test(e.data)||(s=this._getOrReturnCtx(e,s),f(s,{code:u.invalid_string,validation:"datetime",message:i.message}),a.dirty()):i.kind==="date"?ta.test(e.data)||(s=this._getOrReturnCtx(e,s),f(s,{code:u.invalid_string,validation:"date",message:i.message}),a.dirty()):i.kind==="time"?ra(i).test(e.data)||(s=this._getOrReturnCtx(e,s),f(s,{code:u.invalid_string,validation:"time",message:i.message}),a.dirty()):i.kind==="duration"?Kr.test(e.data)||(s=this._getOrReturnCtx(e,s),f(s,{validation:"duration",code:u.invalid_string,message:i.message}),a.dirty()):i.kind==="ip"?aa(e.data,i.version)||(s=this._getOrReturnCtx(e,s),f(s,{validation:"ip",code:u.invalid_string,message:i.message}),a.dirty()):i.kind==="base64"?ea.test(e.data)||(s=this._getOrReturnCtx(e,s),f(s,{validation:"base64",code:u.invalid_string,message:i.message}),a.dirty()):x.assertNever(i);return{status:a.value,value:e.data}}_regex(e,t,a){return this.refinement(s=>e.test(s),{validation:t,code:u.invalid_string,...y.errToObj(a)})}_addCheck(e){return new R({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...y.errToObj(e)})}url(e){return this._addCheck({kind:"url",...y.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...y.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...y.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...y.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...y.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...y.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...y.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...y.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...y.errToObj(e)})}datetime(e){var t,a;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(a=e==null?void 0:e.local)!==null&&a!==void 0?a:!1,...y.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...y.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...y.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...y.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...y.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...y.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...y.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...y.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...y.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...y.errToObj(t)})}nonempty(e){return this.min(1,y.errToObj(e))}trim(){return new R({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new R({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new R({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}R.create=n=>{var e;return new R({checks:[],typeName:g.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,..._(n)})};function na(n,e){const t=(n.toString().split(".")[1]||"").length,a=(e.toString().split(".")[1]||"").length,s=t>a?t:a,i=parseInt(n.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class D extends k{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==m.number){const i=this._getOrReturnCtx(e);return f(i,{code:u.invalid_type,expected:m.number,received:i.parsedType}),v}let a;const s=new A;for(const i of this._def.checks)i.kind==="int"?x.isInteger(e.data)||(a=this._getOrReturnCtx(e,a),f(a,{code:u.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(a=this._getOrReturnCtx(e,a),f(a,{code:u.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(a=this._getOrReturnCtx(e,a),f(a,{code:u.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?na(e.data,i.value)!==0&&(a=this._getOrReturnCtx(e,a),f(a,{code:u.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(a=this._getOrReturnCtx(e,a),f(a,{code:u.not_finite,message:i.message}),s.dirty()):x.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,y.toString(t))}gt(e,t){return this.setLimit("min",e,!1,y.toString(t))}lte(e,t){return this.setLimit("max",e,!0,y.toString(t))}lt(e,t){return this.setLimit("max",e,!1,y.toString(t))}setLimit(e,t,a,s){return new D({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:a,message:y.toString(s)}]})}_addCheck(e){return new D({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:y.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:y.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:y.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:y.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:y.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&x.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(t===null||a.value>t)&&(t=a.value):a.kind==="max"&&(e===null||a.value<e)&&(e=a.value)}return Number.isFinite(t)&&Number.isFinite(e)}}D.create=n=>new D({checks:[],typeName:g.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,..._(n)});class $ extends k{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==m.bigint){const i=this._getOrReturnCtx(e);return f(i,{code:u.invalid_type,expected:m.bigint,received:i.parsedType}),v}let a;const s=new A;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(a=this._getOrReturnCtx(e,a),f(a,{code:u.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(a=this._getOrReturnCtx(e,a),f(a,{code:u.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(a=this._getOrReturnCtx(e,a),f(a,{code:u.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):x.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,y.toString(t))}gt(e,t){return this.setLimit("min",e,!1,y.toString(t))}lte(e,t){return this.setLimit("max",e,!0,y.toString(t))}lt(e,t){return this.setLimit("max",e,!1,y.toString(t))}setLimit(e,t,a,s){return new $({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:a,message:y.toString(s)}]})}_addCheck(e){return new $({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:y.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}$.create=n=>{var e;return new $({checks:[],typeName:g.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,..._(n)})};class ge extends k{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==m.boolean){const a=this._getOrReturnCtx(e);return f(a,{code:u.invalid_type,expected:m.boolean,received:a.parsedType}),v}return M(e.data)}}ge.create=n=>new ge({typeName:g.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,..._(n)});class K extends k{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==m.date){const i=this._getOrReturnCtx(e);return f(i,{code:u.invalid_type,expected:m.date,received:i.parsedType}),v}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return f(i,{code:u.invalid_date}),v}const a=new A;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),f(s,{code:u.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),a.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),f(s,{code:u.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),a.dirty()):x.assertNever(i);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new K({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:y.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:y.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}K.create=n=>new K({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:g.ZodDate,..._(n)});class De extends k{_parse(e){if(this._getType(e)!==m.symbol){const a=this._getOrReturnCtx(e);return f(a,{code:u.invalid_type,expected:m.symbol,received:a.parsedType}),v}return M(e.data)}}De.create=n=>new De({typeName:g.ZodSymbol,..._(n)});class ve extends k{_parse(e){if(this._getType(e)!==m.undefined){const a=this._getOrReturnCtx(e);return f(a,{code:u.invalid_type,expected:m.undefined,received:a.parsedType}),v}return M(e.data)}}ve.create=n=>new ve({typeName:g.ZodUndefined,..._(n)});class _e extends k{_parse(e){if(this._getType(e)!==m.null){const a=this._getOrReturnCtx(e);return f(a,{code:u.invalid_type,expected:m.null,received:a.parsedType}),v}return M(e.data)}}_e.create=n=>new _e({typeName:g.ZodNull,..._(n)});class se extends k{constructor(){super(...arguments),this._any=!0}_parse(e){return M(e.data)}}se.create=n=>new se({typeName:g.ZodAny,..._(n)});class J extends k{constructor(){super(...arguments),this._unknown=!0}_parse(e){return M(e.data)}}J.create=n=>new J({typeName:g.ZodUnknown,..._(n)});class B extends k{_parse(e){const t=this._getOrReturnCtx(e);return f(t,{code:u.invalid_type,expected:m.never,received:t.parsedType}),v}}B.create=n=>new B({typeName:g.ZodNever,..._(n)});class $e extends k{_parse(e){if(this._getType(e)!==m.undefined){const a=this._getOrReturnCtx(e);return f(a,{code:u.invalid_type,expected:m.void,received:a.parsedType}),v}return M(e.data)}}$e.create=n=>new $e({typeName:g.ZodVoid,..._(n)});class O extends k{_parse(e){const{ctx:t,status:a}=this._processInputParams(e),s=this._def;if(t.parsedType!==m.array)return f(t,{code:u.invalid_type,expected:m.array,received:t.parsedType}),v;if(s.exactLength!==null){const o=t.data.length>s.exactLength.value,l=t.data.length<s.exactLength.value;(o||l)&&(f(t,{code:o?u.too_big:u.too_small,minimum:l?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),a.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(f(t,{code:u.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),a.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(f(t,{code:u.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),a.dirty()),t.common.async)return Promise.all([...t.data].map((o,l)=>s.type._parseAsync(new L(t,o,t.path,l)))).then(o=>A.mergeArray(a,o));const i=[...t.data].map((o,l)=>s.type._parseSync(new L(t,o,t.path,l)));return A.mergeArray(a,i)}get element(){return this._def.type}min(e,t){return new O({...this._def,minLength:{value:e,message:y.toString(t)}})}max(e,t){return new O({...this._def,maxLength:{value:e,message:y.toString(t)}})}length(e,t){return new O({...this._def,exactLength:{value:e,message:y.toString(t)}})}nonempty(e){return this.min(1,e)}}O.create=(n,e)=>new O({type:n,minLength:null,maxLength:null,exactLength:null,typeName:g.ZodArray,..._(e)});function Q(n){if(n instanceof j){const e={};for(const t in n.shape){const a=n.shape[t];e[t]=U.create(Q(a))}return new j({...n._def,shape:()=>e})}else return n instanceof O?new O({...n._def,type:Q(n.element)}):n instanceof U?U.create(Q(n.unwrap())):n instanceof Y?Y.create(Q(n.unwrap())):n instanceof N?N.create(n.items.map(e=>Q(e))):n}class j extends k{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=x.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==m.object){const p=this._getOrReturnCtx(e);return f(p,{code:u.invalid_type,expected:m.object,received:p.parsedType}),v}const{status:a,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof B&&this._def.unknownKeys==="strip"))for(const p in s.data)o.includes(p)||l.push(p);const d=[];for(const p of o){const b=i[p],T=s.data[p];d.push({key:{status:"valid",value:p},value:b._parse(new L(s,T,s.path,p)),alwaysSet:p in s.data})}if(this._def.catchall instanceof B){const p=this._def.unknownKeys;if(p==="passthrough")for(const b of l)d.push({key:{status:"valid",value:b},value:{status:"valid",value:s.data[b]}});else if(p==="strict")l.length>0&&(f(s,{code:u.unrecognized_keys,keys:l}),a.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const p=this._def.catchall;for(const b of l){const T=s.data[b];d.push({key:{status:"valid",value:b},value:p._parse(new L(s,T,s.path,b)),alwaysSet:b in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const p=[];for(const b of d){const T=await b.key,G=await b.value;p.push({key:T,value:G,alwaysSet:b.alwaysSet})}return p}).then(p=>A.mergeObjectSync(a,p)):A.mergeObjectSync(a,d)}get shape(){return this._def.shape()}strict(e){return y.errToObj,new j({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,a)=>{var s,i,o,l;const d=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,t,a).message)!==null&&o!==void 0?o:a.defaultError;return t.code==="unrecognized_keys"?{message:(l=y.errToObj(e).message)!==null&&l!==void 0?l:d}:{message:d}}}:{}})}strip(){return new j({...this._def,unknownKeys:"strip"})}passthrough(){return new j({...this._def,unknownKeys:"passthrough"})}extend(e){return new j({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new j({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:g.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new j({...this._def,catchall:e})}pick(e){const t={};return x.objectKeys(e).forEach(a=>{e[a]&&this.shape[a]&&(t[a]=this.shape[a])}),new j({...this._def,shape:()=>t})}omit(e){const t={};return x.objectKeys(this.shape).forEach(a=>{e[a]||(t[a]=this.shape[a])}),new j({...this._def,shape:()=>t})}deepPartial(){return Q(this)}partial(e){const t={};return x.objectKeys(this.shape).forEach(a=>{const s=this.shape[a];e&&!e[a]?t[a]=s:t[a]=s.optional()}),new j({...this._def,shape:()=>t})}required(e){const t={};return x.objectKeys(this.shape).forEach(a=>{if(e&&!e[a])t[a]=this.shape[a];else{let i=this.shape[a];for(;i instanceof U;)i=i._def.innerType;t[a]=i}}),new j({...this._def,shape:()=>t})}keyof(){return br(x.objectKeys(this.shape))}}j.create=(n,e)=>new j({shape:()=>n,unknownKeys:"strip",catchall:B.create(),typeName:g.ZodObject,..._(e)});j.strictCreate=(n,e)=>new j({shape:()=>n,unknownKeys:"strict",catchall:B.create(),typeName:g.ZodObject,..._(e)});j.lazycreate=(n,e)=>new j({shape:n,unknownKeys:"strip",catchall:B.create(),typeName:g.ZodObject,..._(e)});class we extends k{_parse(e){const{ctx:t}=this._processInputParams(e),a=this._def.options;function s(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return t.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new I(l.ctx.common.issues));return f(t,{code:u.invalid_union,unionErrors:o}),v}if(t.common.async)return Promise.all(a.map(async i=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const d of a){const p={...t,common:{...t.common,issues:[]},parent:null},b=d._parseSync({data:t.data,path:t.path,parent:p});if(b.status==="valid")return b;b.status==="dirty"&&!i&&(i={result:b,ctx:p}),p.common.issues.length&&o.push(p.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(d=>new I(d));return f(t,{code:u.invalid_union,unionErrors:l}),v}}get options(){return this._def.options}}we.create=(n,e)=>new we({options:n,typeName:g.ZodUnion,..._(e)});const V=n=>n instanceof Ee?V(n.schema):n instanceof Z?V(n.innerType()):n instanceof Se?[n.value]:n instanceof q?n.options:n instanceof je?x.objectValues(n.enum):n instanceof Pe?V(n._def.innerType):n instanceof ve?[void 0]:n instanceof _e?[null]:n instanceof U?[void 0,...V(n.unwrap())]:n instanceof Y?[null,...V(n.unwrap())]:n instanceof Mt||n instanceof Te?V(n.unwrap()):n instanceof Ce?V(n._def.innerType):[];class Ge extends k{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==m.object)return f(t,{code:u.invalid_type,expected:m.object,received:t.parsedType}),v;const a=this.discriminator,s=t.data[a],i=this.optionsMap.get(s);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(f(t,{code:u.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[a]}),v)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,a){const s=new Map;for(const i of t){const o=V(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of o){if(s.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);s.set(l,i)}}return new Ge({typeName:g.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,..._(a)})}}function bt(n,e){const t=z(n),a=z(e);if(n===e)return{valid:!0,data:n};if(t===m.object&&a===m.object){const s=x.objectKeys(e),i=x.objectKeys(n).filter(l=>s.indexOf(l)!==-1),o={...n,...e};for(const l of i){const d=bt(n[l],e[l]);if(!d.valid)return{valid:!1};o[l]=d.data}return{valid:!0,data:o}}else if(t===m.array&&a===m.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<n.length;i++){const o=n[i],l=e[i],d=bt(o,l);if(!d.valid)return{valid:!1};s.push(d.data)}return{valid:!0,data:s}}else return t===m.date&&a===m.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class ke extends k{_parse(e){const{status:t,ctx:a}=this._processInputParams(e),s=(i,o)=>{if(mt(i)||mt(o))return v;const l=bt(i.value,o.value);return l.valid?((yt(i)||yt(o))&&t.dirty(),{status:t.value,value:l.data}):(f(a,{code:u.invalid_intersection_types}),v)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}ke.create=(n,e,t)=>new ke({left:n,right:e,typeName:g.ZodIntersection,..._(t)});class N extends k{_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==m.array)return f(a,{code:u.invalid_type,expected:m.array,received:a.parsedType}),v;if(a.data.length<this._def.items.length)return f(a,{code:u.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),v;!this._def.rest&&a.data.length>this._def.items.length&&(f(a,{code:u.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...a.data].map((o,l)=>{const d=this._def.items[l]||this._def.rest;return d?d._parse(new L(a,o,a.path,l)):null}).filter(o=>!!o);return a.common.async?Promise.all(i).then(o=>A.mergeArray(t,o)):A.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new N({...this._def,rest:e})}}N.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new N({items:n,typeName:g.ZodTuple,rest:null,..._(e)})};class xe extends k{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==m.object)return f(a,{code:u.invalid_type,expected:m.object,received:a.parsedType}),v;const s=[],i=this._def.keyType,o=this._def.valueType;for(const l in a.data)s.push({key:i._parse(new L(a,l,a.path,l)),value:o._parse(new L(a,a.data[l],a.path,l)),alwaysSet:l in a.data});return a.common.async?A.mergeObjectAsync(t,s):A.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,a){return t instanceof k?new xe({keyType:e,valueType:t,typeName:g.ZodRecord,..._(a)}):new xe({keyType:R.create(),valueType:e,typeName:g.ZodRecord,..._(t)})}}class qe extends k{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==m.map)return f(a,{code:u.invalid_type,expected:m.map,received:a.parsedType}),v;const s=this._def.keyType,i=this._def.valueType,o=[...a.data.entries()].map(([l,d],p)=>({key:s._parse(new L(a,l,a.path,[p,"key"])),value:i._parse(new L(a,d,a.path,[p,"value"]))}));if(a.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const d of o){const p=await d.key,b=await d.value;if(p.status==="aborted"||b.status==="aborted")return v;(p.status==="dirty"||b.status==="dirty")&&t.dirty(),l.set(p.value,b.value)}return{status:t.value,value:l}})}else{const l=new Map;for(const d of o){const p=d.key,b=d.value;if(p.status==="aborted"||b.status==="aborted")return v;(p.status==="dirty"||b.status==="dirty")&&t.dirty(),l.set(p.value,b.value)}return{status:t.value,value:l}}}}qe.create=(n,e,t)=>new qe({valueType:e,keyType:n,typeName:g.ZodMap,..._(t)});class F extends k{_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==m.set)return f(a,{code:u.invalid_type,expected:m.set,received:a.parsedType}),v;const s=this._def;s.minSize!==null&&a.data.size<s.minSize.value&&(f(a,{code:u.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&a.data.size>s.maxSize.value&&(f(a,{code:u.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const i=this._def.valueType;function o(d){const p=new Set;for(const b of d){if(b.status==="aborted")return v;b.status==="dirty"&&t.dirty(),p.add(b.value)}return{status:t.value,value:p}}const l=[...a.data.values()].map((d,p)=>i._parse(new L(a,d,a.path,p)));return a.common.async?Promise.all(l).then(d=>o(d)):o(l)}min(e,t){return new F({...this._def,minSize:{value:e,message:y.toString(t)}})}max(e,t){return new F({...this._def,maxSize:{value:e,message:y.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}F.create=(n,e)=>new F({valueType:n,minSize:null,maxSize:null,typeName:g.ZodSet,..._(e)});class re extends k{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==m.function)return f(t,{code:u.invalid_type,expected:m.function,received:t.parsedType}),v;function a(l,d){return Be({data:l,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ve(),ne].filter(p=>!!p),issueData:{code:u.invalid_arguments,argumentsError:d}})}function s(l,d){return Be({data:l,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ve(),ne].filter(p=>!!p),issueData:{code:u.invalid_return_type,returnTypeError:d}})}const i={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof ie){const l=this;return M(async function(...d){const p=new I([]),b=await l._def.args.parseAsync(d,i).catch(Xe=>{throw p.addIssue(a(d,Xe)),p}),T=await Reflect.apply(o,this,b);return await l._def.returns._def.type.parseAsync(T,i).catch(Xe=>{throw p.addIssue(s(T,Xe)),p})})}else{const l=this;return M(function(...d){const p=l._def.args.safeParse(d,i);if(!p.success)throw new I([a(d,p.error)]);const b=Reflect.apply(o,this,p.data),T=l._def.returns.safeParse(b,i);if(!T.success)throw new I([s(b,T.error)]);return T.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new re({...this._def,args:N.create(e).rest(J.create())})}returns(e){return new re({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,a){return new re({args:e||N.create([]).rest(J.create()),returns:t||J.create(),typeName:g.ZodFunction,..._(a)})}}class Ee extends k{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Ee.create=(n,e)=>new Ee({getter:n,typeName:g.ZodLazy,..._(e)});class Se extends k{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return f(t,{received:t.data,code:u.invalid_literal,expected:this._def.value}),v}return{status:"valid",value:e.data}}get value(){return this._def.value}}Se.create=(n,e)=>new Se({value:n,typeName:g.ZodLiteral,..._(e)});function br(n,e){return new q({values:n,typeName:g.ZodEnum,..._(e)})}class q extends k{constructor(){super(...arguments),ue.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),a=this._def.values;return f(t,{expected:x.joinValues(a),received:t.parsedType,code:u.invalid_type}),v}if(ze(this,ue,"f")||pr(this,ue,new Set(this._def.values),"f"),!ze(this,ue,"f").has(e.data)){const t=this._getOrReturnCtx(e),a=this._def.values;return f(t,{received:t.data,code:u.invalid_enum_value,options:a}),v}return M(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return q.create(e,{...this._def,...t})}exclude(e,t=this._def){return q.create(this.options.filter(a=>!e.includes(a)),{...this._def,...t})}}ue=new WeakMap;q.create=br;class je extends k{constructor(){super(...arguments),he.set(this,void 0)}_parse(e){const t=x.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(e);if(a.parsedType!==m.string&&a.parsedType!==m.number){const s=x.objectValues(t);return f(a,{expected:x.joinValues(s),received:a.parsedType,code:u.invalid_type}),v}if(ze(this,he,"f")||pr(this,he,new Set(x.getValidEnumValues(this._def.values)),"f"),!ze(this,he,"f").has(e.data)){const s=x.objectValues(t);return f(a,{received:a.data,code:u.invalid_enum_value,options:s}),v}return M(e.data)}get enum(){return this._def.values}}he=new WeakMap;je.create=(n,e)=>new je({values:n,typeName:g.ZodNativeEnum,..._(e)});class ie extends k{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==m.promise&&t.common.async===!1)return f(t,{code:u.invalid_type,expected:m.promise,received:t.parsedType}),v;const a=t.parsedType===m.promise?t.data:Promise.resolve(t.data);return M(a.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ie.create=(n,e)=>new ie({type:n,typeName:g.ZodPromise,..._(e)});class Z extends k{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===g.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:a}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{f(a,o),o.fatal?t.abort():t.dirty()},get path(){return a.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(a.data,i);if(a.common.async)return Promise.resolve(o).then(async l=>{if(t.value==="aborted")return v;const d=await this._def.schema._parseAsync({data:l,path:a.path,parent:a});return d.status==="aborted"?v:d.status==="dirty"||t.value==="dirty"?ee(d.value):d});{if(t.value==="aborted")return v;const l=this._def.schema._parseSync({data:o,path:a.path,parent:a});return l.status==="aborted"?v:l.status==="dirty"||t.value==="dirty"?ee(l.value):l}}if(s.type==="refinement"){const o=l=>{const d=s.refinement(l,i);if(a.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(a.common.async===!1){const l=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return l.status==="aborted"?v:(l.status==="dirty"&&t.dirty(),o(l.value),{status:t.value,value:l.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(l=>l.status==="aborted"?v:(l.status==="dirty"&&t.dirty(),o(l.value).then(()=>({status:t.value,value:l.value}))))}if(s.type==="transform")if(a.common.async===!1){const o=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!ye(o))return o;const l=s.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:l}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(o=>ye(o)?Promise.resolve(s.transform(o.value,i)).then(l=>({status:t.value,value:l})):o);x.assertNever(s)}}Z.create=(n,e,t)=>new Z({schema:n,typeName:g.ZodEffects,effect:e,..._(t)});Z.createWithPreprocess=(n,e,t)=>new Z({schema:e,effect:{type:"preprocess",transform:n},typeName:g.ZodEffects,..._(t)});class U extends k{_parse(e){return this._getType(e)===m.undefined?M(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}U.create=(n,e)=>new U({innerType:n,typeName:g.ZodOptional,..._(e)});class Y extends k{_parse(e){return this._getType(e)===m.null?M(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Y.create=(n,e)=>new Y({innerType:n,typeName:g.ZodNullable,..._(e)});class Pe extends k{_parse(e){const{ctx:t}=this._processInputParams(e);let a=t.data;return t.parsedType===m.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Pe.create=(n,e)=>new Pe({innerType:n,typeName:g.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,..._(e)});class Ce extends k{_parse(e){const{ctx:t}=this._processInputParams(e),a={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return be(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new I(a.common.issues)},input:a.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new I(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}}Ce.create=(n,e)=>new Ce({innerType:n,typeName:g.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,..._(e)});class Ye extends k{_parse(e){if(this._getType(e)!==m.nan){const a=this._getOrReturnCtx(e);return f(a,{code:u.invalid_type,expected:m.nan,received:a.parsedType}),v}return{status:"valid",value:e.data}}}Ye.create=n=>new Ye({typeName:g.ZodNaN,..._(n)});const sa=Symbol("zod_brand");class Mt extends k{_parse(e){const{ctx:t}=this._processInputParams(e),a=t.data;return this._def.type._parse({data:a,path:t.path,parent:t})}unwrap(){return this._def.type}}class Me extends k{_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return i.status==="aborted"?v:i.status==="dirty"?(t.dirty(),ee(i.value)):this._def.out._parseAsync({data:i.value,path:a.path,parent:a})})();{const s=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return s.status==="aborted"?v:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:a.path,parent:a})}}static create(e,t){return new Me({in:e,out:t,typeName:g.ZodPipeline})}}class Te extends k{_parse(e){const t=this._def.innerType._parse(e),a=s=>(ye(s)&&(s.value=Object.freeze(s.value)),s);return be(t)?t.then(s=>a(s)):a(t)}unwrap(){return this._def.innerType}}Te.create=(n,e)=>new Te({innerType:n,typeName:g.ZodReadonly,..._(e)});function gr(n,e={},t){return n?se.create().superRefine((a,s)=>{var i,o;if(!n(a)){const l=typeof e=="function"?e(a):typeof e=="string"?{message:e}:e,d=(o=(i=l.fatal)!==null&&i!==void 0?i:t)!==null&&o!==void 0?o:!0,p=typeof l=="string"?{message:l}:l;s.addIssue({code:"custom",...p,fatal:d})}}):se.create()}const ia={object:j.lazycreate};var g;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(g||(g={}));const oa=(n,e={message:`Input not instance of ${n.name}`})=>gr(t=>t instanceof n,e),vr=R.create,_r=D.create,la=Ye.create,ca=$.create,wr=ge.create,da=K.create,ua=De.create,ha=ve.create,pa=_e.create,fa=se.create,ma=J.create,ya=B.create,ba=$e.create,ga=O.create,va=j.create,_a=j.strictCreate,wa=we.create,ka=Ge.create,xa=ke.create,Ea=N.create,Sa=xe.create,ja=qe.create,Pa=F.create,Ca=re.create,Ta=Ee.create,Aa=Se.create,Ma=q.create,Ia=je.create,Wa=ie.create,Zt=Z.create,Ra=U.create,Oa=Y.create,Za=Z.createWithPreprocess,Ua=Me.create,La=()=>vr().optional(),Na=()=>_r().optional(),Va=()=>wr().optional(),Ba={string:n=>R.create({...n,coerce:!0}),number:n=>D.create({...n,coerce:!0}),boolean:n=>ge.create({...n,coerce:!0}),bigint:n=>$.create({...n,coerce:!0}),date:n=>K.create({...n,coerce:!0})},za=v;var r=Object.freeze({__proto__:null,defaultErrorMap:ne,setErrorMap:zr,getErrorMap:Ve,makeIssue:Be,EMPTY_PATH:Dr,addIssueToContext:f,ParseStatus:A,INVALID:v,DIRTY:ee,OK:M,isAborted:mt,isDirty:yt,isValid:ye,isAsync:be,get util(){return x},get objectUtil(){return ft},ZodParsedType:m,getParsedType:z,ZodType:k,datetimeRegex:yr,ZodString:R,ZodNumber:D,ZodBigInt:$,ZodBoolean:ge,ZodDate:K,ZodSymbol:De,ZodUndefined:ve,ZodNull:_e,ZodAny:se,ZodUnknown:J,ZodNever:B,ZodVoid:$e,ZodArray:O,ZodObject:j,ZodUnion:we,ZodDiscriminatedUnion:Ge,ZodIntersection:ke,ZodTuple:N,ZodRecord:xe,ZodMap:qe,ZodSet:F,ZodFunction:re,ZodLazy:Ee,ZodLiteral:Se,ZodEnum:q,ZodNativeEnum:je,ZodPromise:ie,ZodEffects:Z,ZodTransformer:Z,ZodOptional:U,ZodNullable:Y,ZodDefault:Pe,ZodCatch:Ce,ZodNaN:Ye,BRAND:sa,ZodBranded:Mt,ZodPipeline:Me,ZodReadonly:Te,custom:gr,Schema:k,ZodSchema:k,late:ia,get ZodFirstPartyTypeKind(){return g},coerce:Ba,any:fa,array:ga,bigint:ca,boolean:wr,date:da,discriminatedUnion:ka,effect:Zt,enum:Ma,function:Ca,instanceof:oa,intersection:xa,lazy:Ta,literal:Aa,map:ja,nan:la,nativeEnum:Ia,never:ya,null:pa,nullable:Oa,number:_r,object:va,oboolean:Va,onumber:Na,optional:Ra,ostring:La,pipeline:Ua,preprocess:Za,promise:Wa,record:Sa,set:Pa,strictObject:_a,string:vr,symbol:ua,transformer:Zt,tuple:Ea,undefined:ha,union:wa,unknown:ma,void:ba,NEVER:za,ZodIssueCode:u,quotelessJson:Br,ZodError:I});const Da=r.object({access_code:r.string().optional().nullable(),url:r.string(),author:r.object({firstname:r.string().nullable(),lastname:r.string().nullable()}).optional().nullable(),imageUrl:r.string().optional().nullable(),lang:r.string().optional().nullable(),title:r.string().optional().nullable(),type:r.string().optional().nullable()}),$a="activity-picker-result";r.union([r.literal("true"),r.literal("false"),r.literal("0"),r.literal("1"),r.literal("")]);r.string().regex(/^\d*$/,{message:"Must be a positive integer number"});r.string().url().or(r.string().startsWith("/")).or(r.literal(""));const qa=r.object({scope:r.literal("local"),author:r.string().optional()}),Ya=r.object({scope:r.literal("bubble")}),Ha=r.union([qa,Ya]),Ja=r.object({message:r.string(),options:Ha}),Ka=r.object({name:r.string(),active:r.boolean(),isMe:r.boolean(),jid:r.string(),isMember:r.boolean(),color:r.string().optional()});var He=(n=>(n[n.text=1]="text",n[n.me=2]="me",n[n.userIncoming=3]="userIncoming",n[n.userOutcoming=4]="userOutcoming",n[n.userWriting=5]="userWriting",n[n.userStopWriting=6]="userStopWriting",n))(He||{});const Fa=r.nativeEnum(He),Ut=r.object({id:r.optional(r.string()),type:Fa,date:r.date(),author:r.optional(r.nullable(Ka)),name:r.optional(r.nullable(r.string())),targets:r.optional(r.nullable(r.array(r.nullable(r.string())))),text:r.optional(r.nullable(r.array(r.string())))}),kr=r.object({uuid:r.string(),name:r.string()}),Ga=r.object({author:r.string().optional()}),Xa=r.object({author:r.string().optional()}),Qa=r.object({users:r.array(r.object({jid:r.string().optional(),name:r.string().optional()}))}),en=r.object({popupId:r.number()}),tn=r.object({url:r.string()}),rn=r.object({url:r.string()}),an=r.object({url:r.string(),allowApi:r.boolean().optional(),allowPolicy:r.optional(r.string()),widthPercent:r.optional(r.number()),position:r.optional(r.number()),closable:r.boolean().optional(),lazy:r.boolean().optional()}),Lt=r.object({id:r.string()}),nn=r.object({label:r.string(),className:r.optional(r.string())}),sn=r.object({popupId:r.number(),targetObject:r.string(),message:r.string(),buttons:r.array(nn)}),on=r.object({url:r.string()}),Nt=r.object({name:r.string()}),ln=r.object({layerName:r.string(),propertyName:r.string(),propertyValue:r.optional(r.union([r.string(),r.number(),r.boolean()]))}),cn=r.object({url:r.string()}),dn=r.object({volume:r.optional(r.number()),loop:r.boolean().optional(),mute:r.boolean().optional(),rate:r.optional(r.number()),detune:r.optional(r.number()),seek:r.optional(r.number()),delay:r.optional(r.number())}),un=r.object({url:r.string(),config:r.optional(dn)}),hn=r.object({url:r.string()}),pn=r.array(r.object({x:r.number(),y:r.number(),tile:r.union([r.number(),r.string(),r.null()]),layer:r.string()})),fn=r.object({roomId:r.string(),hashParameters:r.record(r.string(),r.string()),mapUrl:r.string(),nickname:r.string(),language:r.string().optional(),playerId:r.number().optional(),uuid:r.string().optional(),startLayerName:r.string().optional(),tags:r.string().array(),variables:r.unknown(),playerVariables:r.unknown(),userRoomToken:r.string().optional(),metadata:r.unknown().optional(),iframeId:r.string().optional(),isLogged:r.boolean().optional().default(!1)}),mn=r.object({data:r.unknown()}),Je=r.object({key:r.string(),value:r.unknown()});r.object({type:r.literal("setVariable"),data:Je});const yn=r.object({x:r.number(),y:r.number(),width:r.number(),height:r.number()}),bn=r.object({name:r.string(),url:r.optional(r.string()),visible:r.boolean().optional(),allowApi:r.boolean().optional(),allow:r.optional(r.string()),x:r.optional(r.number()),y:r.optional(r.number()),width:r.optional(r.number()),height:r.optional(r.number()),origin:r.optional(r.enum(["player","map"])),scale:r.optional(r.number())}),Vt=r.object({name:r.string(),url:r.string(),position:yn,visible:r.boolean().optional(),allowApi:r.boolean().optional(),allow:r.optional(r.string()),origin:r.optional(r.enum(["player","map"])),scale:r.optional(r.number())}),gn=r.object({url:r.string()}),vn="triggerActionMessage",_n="removeActionMessage",wn=r.enum(["message","warning"]),Bt=r.object({message:r.string(),uuid:r.string(),type:wn}),gt=r.object({uuid:r.string()}),kn=r.object({key:r.string()}),xn=r.object({allowApi:r.boolean()}),En=r.object({name:r.string(),iframe:r.optional(r.string()),key:r.string(),options:xn}),Sn=r.object({key:r.string()}),xr=r.object({x:r.number(),y:r.number()}),jn=r.object({x:r.number(),y:r.number(),width:r.optional(r.number()),height:r.optional(r.number()),lock:r.boolean(),smooth:r.boolean(),duration:r.optional(r.number())}),Pn=r.object({smooth:r.boolean(),duration:r.optional(r.number())}),Cn=r.object({red:r.number(),green:r.number(),blue:r.number()}),Tn=r.object({x:r.number(),y:r.number(),speed:r.optional(r.number())}),An=r.object({x:r.number(),y:r.number(),cancelled:r.boolean()}),Mn=r.object({id:r.number(),actionKey:r.string()}),In=r.object({id:r.number(),actionKey:r.string()}),Wn=r.object({areaName:r.string(),propertyName:r.string(),propertyValue:r.optional(r.union([r.string(),r.number(),r.boolean()]))}),Rn=/-*\d+(px|em|%|cm|in|pc|pt|mm|ex|vw|vh|rem)|auto|inherit/,te=r.string().regex(Rn),It=r.object({top:te.optional(),bottom:te.optional(),left:te.optional(),right:te.optional()}),On=r.enum(["top","middle","bottom"]),Zn=r.enum(["left","middle","right"]),Wt=r.object({vertical:On,horizontal:Zn}),Rt=r.object({height:te,width:te}),Un=r.object({url:r.string(),visible:r.boolean().optional(),allowApi:r.boolean().optional(),allowPolicy:r.optional(r.string()),position:Wt,size:Rt,margin:It.partial().optional()}),Ln=r.object({id:r.string(),url:r.string().optional(),visible:r.boolean().optional(),position:Wt.optional(),size:Rt.optional(),margin:It.partial().optional()}),et=r.object({id:r.string(),url:r.string(),visible:r.boolean(),allowApi:r.boolean(),allowPolicy:r.string(),position:Wt,size:Rt,margin:It.partial().optional()}),Er=r.object({name:r.string(),x:r.optional(r.number()),y:r.optional(r.number()),width:r.optional(r.number()),height:r.optional(r.number())}),zt=r.object({name:r.string(),x:r.number(),y:r.number(),width:r.number(),height:r.number()}),Nn=r.object({message:r.string(),senderId:r.number().optional().describe("The id of the sender of the message. If not provided, the message is sent by the current user.")}),Dt=r.object({name:r.string()}),$t=r.object({name:r.string()}),Ie=r.object({name:r.string()}),Vn=r.object({popupId:r.number(),buttonId:r.number()}),Bn=r.object({id:r.number(),actionName:r.string()}),zn=r.object({direction:r.enum(["right","left","up","down"]),moving:r.boolean(),x:r.number(),y:r.number(),oldX:r.optional(r.number()),oldY:r.optional(r.number())}),Dn=r.object({x:r.number(),y:r.number(),width:r.number(),height:r.number(),zoom:r.number()}),$n=r.object({uuid:r.string(),playUri:r.string()}),qn=r.object({url:r.string()}),Yn=r.object({url:r.string(),name:r.string(),type:r.string(),subscribe:r.boolean()}),Hn=r.object({menuItem:r.string()}),oe=r.object({playerId:r.number(),name:r.string(),userUuid:r.string(),availabilityStatus:r.string(),outlineColor:r.number().optional(),position:xr,variables:r.map(r.string(),r.unknown()),chatID:r.string().optional().nullable()}),Jn=oe.omit({userUuid:!0}).partial({name:!0,availabilityStatus:!0,outlineColor:!0,position:!0,variables:!0}),Kn=r.object({users:oe.array()}),We=r.object({user:oe}),Fn=r.object({key:r.string(),value:r.unknown(),playerId:r.number()}),Gn=r.object({players:r.boolean(),movement:r.boolean()}),Xn=r.object({key:r.string(),value:r.unknown(),public:r.boolean(),persist:r.boolean(),ttl:r.number().optional(),scope:r.union([r.literal("room"),r.literal("world")])}),Qn=r.object({notification:r.boolean(),chatSounds:r.boolean(),enableChat:r.boolean(),enableChatUpload:r.boolean(),enableChatOnlineList:r.boolean(),enableChatDisconnectedList:r.boolean()}),es=r.object({visibility:r.boolean()}),ts=r.object({visitCardUrl:r.string()}),Sr=r.object({src:r.string(),allow:r.string().optional().nullable().default(null),title:r.string().optional().default("WorkAdventure modal iframe"),position:r.enum(["right","left","center"]).optional().default("right"),allowApi:r.boolean().optional().default(!1)}),jr=r.object({id:r.string(),label:r.string(),type:r.enum(["button"]).optional().default("button")}),Pr=r.object({id:r.string(),type:r.enum(["action"]),imageSrc:r.string(),toolTip:r.string()}),Cr=r.union([jr,Pr]),rs=r.object({id:r.string()}),as=r.object({id:r.string(),text:r.string(),bgColor:r.string().optional(),textColor:r.string().optional(),closable:r.boolean().default(!0).optional(),timeToClose:r.number().default(12e4).optional(),link:r.object({url:r.string(),label:r.string()}).optional()}),ns=r.object({x:r.number(),y:r.number()}),Tr=r.object({name:r.string(),data:r.unknown(),targetUserIds:r.array(r.number()).optional()});r.object({type:r.literal("dispatchEvent"),data:Tr});const Ar=r.object({name:r.string(),data:r.unknown(),senderId:r.number().optional()});r.object({type:r.literal("receiveEvent"),data:Ar});const ss=r.object({url:r.string()}),Mr=r.object({sampleRate:r.number()}),Ir=r.object({data:r.instanceof(Float32Array)}),is=r.object({data:r.unknown()});r.union([r.object({type:r.literal("addActionsMenuKeyToRemotePlayer"),data:Mn}),r.object({type:r.literal("removeActionsMenuKeyFromRemotePlayer"),data:In}),r.object({type:r.literal("loadPage"),data:rn}),r.object({type:r.literal("chat"),data:Ja}),r.object({type:r.literal("startWriting"),data:Ga}),r.object({type:r.literal("stopWriting"),data:Xa}),r.object({type:r.literal("openChat"),data:r.undefined()}),r.object({type:r.literal("closeChat"),data:r.undefined()}),r.object({type:r.literal("addPersonnalMessage"),data:r.string()}),r.object({type:r.literal("newChatMessageWritingStatus"),data:r.number()}),r.object({type:r.literal("cameraFollowPlayer"),data:Pn}),r.object({type:r.literal("cameraSet"),data:jn}),r.object({type:r.literal("openPopup"),data:sn}),r.object({type:r.literal("closePopup"),data:en}),r.object({type:r.literal("openTab"),data:on}),r.object({type:r.literal("goToPage"),data:tn}),r.object({type:r.literal("turnOffMicrophone"),data:r.undefined()}),r.object({type:r.literal("turnOffWebcam"),data:r.undefined()}),r.object({type:r.literal("disableMicrophone"),data:r.undefined()}),r.object({type:r.literal("restoreMicrophone"),data:r.undefined()}),r.object({type:r.literal("disableWebcam"),data:r.undefined()}),r.object({type:r.literal("restoreWebcam"),data:r.undefined()}),r.object({type:r.literal("disablePlayerControls"),data:r.undefined()}),r.object({type:r.literal("restorePlayerControls"),data:r.undefined()}),r.object({type:r.literal("disablePlayerProximityMeeting"),data:r.undefined()}),r.object({type:r.literal("restorePlayerProximityMeeting"),data:r.undefined()}),r.object({type:r.literal("displayBubble"),data:r.undefined()}),r.object({type:r.literal("removeBubble"),data:r.undefined()}),r.object({type:r.literal("onPlayerMove"),data:r.undefined()}),r.object({type:r.literal("onCameraUpdate"),data:r.undefined()}),r.object({type:r.literal("showLayer"),data:Nt}),r.object({type:r.literal("hideLayer"),data:Nt}),r.object({type:r.literal("setProperty"),data:ln}),r.object({type:r.literal("setAreaProperty"),data:Wn}),r.object({type:r.literal("loadSound"),data:cn}),r.object({type:r.literal("playSound"),data:un}),r.object({type:r.literal("stopSound"),data:hn}),r.object({type:r.literal("registerMenu"),data:En}),r.object({type:r.literal("unregisterMenu"),data:kn}),r.object({type:r.literal("openMenu"),data:Sn}),r.object({type:r.literal("setTiles"),data:pn}),r.object({type:r.literal("modifyEmbeddedWebsite"),data:bn}),r.object({type:r.literal("modifyUIWebsite"),data:Ln}),r.object({type:r.literal("modifyArea"),data:Er}),r.object({type:r.literal("askPosition"),data:$n}),r.object({type:r.literal("openInviteMenu"),data:r.undefined()}),r.object({type:r.literal("login"),data:r.undefined()}),r.object({type:r.literal("refresh"),data:r.undefined()}),r.object({type:r.literal("showBusinessCard"),data:ts}),r.object({type:r.literal("openModal"),data:Sr}),r.object({type:r.literal("closeModal"),data:r.undefined()}),r.object({type:r.literal("redirectPricing"),data:r.undefined()}),r.object({type:r.literal("addButtonActionBar"),data:Cr}),r.object({type:r.literal("removeButtonActionBar"),data:rs}),r.object({type:r.literal("openBanner"),data:as}),r.object({type:r.literal("closeBanner"),data:r.undefined()}),r.object({type:r.literal($a),payload:Da}),r.object({type:r.literal("banUser"),data:kr}),r.object({type:r.literal("disableMapEditor"),data:r.undefined()}),r.object({type:r.literal("restoreMapEditor"),data:r.undefined()}),r.object({type:r.literal("disableScreenSharing"),data:r.undefined()}),r.object({type:r.literal("restoreScreenSharing"),data:r.undefined()}),r.object({type:r.literal("disableRightClick"),data:r.undefined()}),r.object({type:r.literal("restoreRightClick"),data:r.undefined()}),r.object({type:r.literal("disableWheelZoom"),data:r.undefined()}),r.object({type:r.literal("restoreWheelZoom"),data:r.undefined()}),r.object({type:r.literal("disableInviteUserButton"),data:r.undefined()}),r.object({type:r.literal("restoreInviteUserButton"),data:r.undefined()}),r.object({type:r.literal("disableRoomList"),data:r.undefined()}),r.object({type:r.literal("restoreRoomList"),data:r.undefined()}),r.object({type:r.literal("startListeningToStreamInBubble"),data:Mr}),r.object({type:r.literal("stopListeningToStreamInBubble"),data:r.undefined()})]);const os=r.union([r.object({type:r.literal("userInputChat"),data:Nn}),r.object({type:r.literal("joinProximityMeetingEvent"),data:Kn}),r.object({type:r.literal("participantJoinProximityMeetingEvent"),data:We}),r.object({type:r.literal("participantLeaveProximityMeetingEvent"),data:We}),r.object({type:r.literal("leaveProximityMeetingEvent"),data:r.undefined()}),r.object({type:r.literal("onFollowed"),data:We}),r.object({type:r.literal("onUnfollowed"),data:We}),r.object({type:r.literal("enterEvent"),data:Dt}),r.object({type:r.literal("leaveEvent"),data:Dt}),r.object({type:r.literal("enterMapEditorAreaEvent"),data:Ie}),r.object({type:r.literal("leaveMapEditorAreaEvent"),data:Ie}),r.object({type:r.literal("enterLayerEvent"),data:$t}),r.object({type:r.literal("leaveLayerEvent"),data:$t}),r.object({type:r.literal("enterAreaEvent"),data:Ie}),r.object({type:r.literal("leaveAreaEvent"),data:Ie}),r.object({type:r.literal("buttonClickedEvent"),data:Vn}),r.object({type:r.literal("remotePlayerClickedEvent"),data:oe}),r.object({type:r.literal("actionsMenuActionClickedEvent"),data:Bn}),r.object({type:r.literal("hasPlayerMoved"),data:zn}),r.object({type:r.literal("wasCameraUpdated"),data:Dn}),r.object({type:r.literal("menuItemClicked"),data:Hn}),r.object({type:r.literal("setVariable"),data:Je}),r.object({type:r.literal("setPlayerVariable"),data:Je}),r.object({type:r.literal("setSharedPlayerVariable"),data:Fn}),r.object({type:r.literal("receiveEvent"),data:Ar}),r.object({type:r.literal("messageTriggered"),data:gt}),r.object({type:r.literal("leaveMuc"),data:qn}),r.object({type:r.literal("joinMuc"),data:Yn}),r.object({type:r.literal("addRemotePlayer"),data:oe}),r.object({type:r.literal("removeRemotePlayer"),data:r.number()}),r.object({type:r.literal("remotePlayerChanged"),data:Jn}),r.object({type:r.literal("settings"),data:Qn}),r.object({type:r.literal("chatVisibility"),data:es}),r.object({type:r.literal("availabilityStatus"),data:r.number()}),r.object({type:r.literal("peerConnectionStatus"),data:r.boolean()}),r.object({type:r.literal("comingUser"),data:Ut}),r.object({type:r.literal("addChatMessage"),data:Ut}),r.object({type:r.literal("updateWritingStatusChatList"),data:Qa}),r.object({type:r.literal("buttonActionBarTrigger"),data:Cr}),r.object({type:r.literal("modalCloseTrigger"),data:Sr}),r.object({type:r.literal("banUser"),data:kr}),r.object({type:r.literal("appendPCMData"),data:Ir})]),ls=r.object({type:r.string(),data:r.unknown().optional(),payload:r.unknown().optional()});r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.number(),r.undefined(),r.array(Lt),r.string(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.string(),r.string(),r.undefined(),r.undefined(),r.undefined(),r.string(),r.undefined(),r.string(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.string(),r.undefined(),r.undefined(),r.array(et),r.string(),r.array(oe),r.undefined(),r.string(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined();const cs=n=>typeof n.type=="string"&&typeof n.id=="number",ds=r.object({id:r.number(),type:r.string(),error:r.string()});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vt=function(n,e){return vt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var s in a)a.hasOwnProperty(s)&&(t[s]=a[s])},vt(n,e)};function le(n,e){vt(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function _t(n){return typeof n=="function"}var qt=!1,W={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){var e=new Error;""+e.stack}qt=n},get useDeprecatedSynchronousErrorHandling(){return qt}};function pe(n){setTimeout(function(){throw n},0)}var Ke={closed:!0,next:function(n){},error:function(n){if(W.useDeprecatedSynchronousErrorHandling)throw n;pe(n)},complete:function(){}},us=function(){return Array.isArray||function(n){return n&&typeof n.length=="number"}}();function hs(n){return n!==null&&typeof n=="object"}var ps=function(){function n(e){return Error.call(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(t,a){return a+1+") "+t.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e,this}return n.prototype=Object.create(Error.prototype),n}(),Ne=ps,Ae=function(){function n(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return n.prototype.unsubscribe=function(){var e;if(!this.closed){var t=this,a=t._parentOrParents,s=t._ctorUnsubscribe,i=t._unsubscribe,o=t._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,a instanceof n)a.remove(this);else if(a!==null)for(var l=0;l<a.length;++l){var d=a[l];d.remove(this)}if(_t(i)){s&&(this._unsubscribe=void 0);try{i.call(this)}catch(T){e=T instanceof Ne?Yt(T.errors):[T]}}if(us(o))for(var l=-1,p=o.length;++l<p;){var b=o[l];if(hs(b))try{b.unsubscribe()}catch(G){e=e||[],G instanceof Ne?e=e.concat(Yt(G.errors)):e.push(G)}}if(e)throw new Ne(e)}},n.prototype.add=function(e){var t=e;if(!e)return n.EMPTY;switch(typeof e){case"function":t=new n(e);case"object":if(t===this||t.closed||typeof t.unsubscribe!="function")return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof n)){var a=t;t=new n,t._subscriptions=[a]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var s=t._parentOrParents;if(s===null)t._parentOrParents=this;else if(s instanceof n){if(s===this)return t;t._parentOrParents=[s,this]}else if(s.indexOf(this)===-1)s.push(this);else return t;var i=this._subscriptions;return i===null?this._subscriptions=[t]:i.push(t),t},n.prototype.remove=function(e){var t=this._subscriptions;if(t){var a=t.indexOf(e);a!==-1&&t.splice(a,1)}},n.EMPTY=function(e){return e.closed=!0,e}(new n),n}();function Yt(n){return n.reduce(function(e,t){return e.concat(t instanceof Ne?t.errors:t)},[])}var Fe=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),ae=function(n){le(e,n);function e(t,a,s){var i=n.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=Ke;break;case 1:if(!t){i.destination=Ke;break}if(typeof t=="object"){t instanceof e?(i.syncErrorThrowable=t.syncErrorThrowable,i.destination=t,t.add(i)):(i.syncErrorThrowable=!0,i.destination=new Ht(i,t));break}default:i.syncErrorThrowable=!0,i.destination=new Ht(i,t,a,s);break}return i}return e.prototype[Fe]=function(){return this},e.create=function(t,a,s){var i=new e(t,a,s);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(Ae),Ht=function(n){le(e,n);function e(t,a,s,i){var o=n.call(this)||this;o._parentSubscriber=t;var l,d=o;return _t(a)?l=a:a&&(l=a.next,s=a.error,i=a.complete,a!==Ke&&(d=Object.create(a),_t(d.unsubscribe)&&o.add(d.unsubscribe.bind(d)),d.unsubscribe=o.unsubscribe.bind(o))),o._context=d,o._next=l,o._error=s,o._complete=i,o}return e.prototype.next=function(t){if(!this.isStopped&&this._next){var a=this._parentSubscriber;!W.useDeprecatedSynchronousErrorHandling||!a.syncErrorThrowable?this.__tryOrUnsub(this._next,t):this.__tryOrSetError(a,this._next,t)&&this.unsubscribe()}},e.prototype.error=function(t){if(!this.isStopped){var a=this._parentSubscriber,s=W.useDeprecatedSynchronousErrorHandling;if(this._error)!s||!a.syncErrorThrowable?(this.__tryOrUnsub(this._error,t),this.unsubscribe()):(this.__tryOrSetError(a,this._error,t),this.unsubscribe());else if(a.syncErrorThrowable)s?(a.syncErrorValue=t,a.syncErrorThrown=!0):pe(t),this.unsubscribe();else{if(this.unsubscribe(),s)throw t;pe(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var a=this._parentSubscriber;if(this._complete){var s=function(){return t._complete.call(t._context)};!W.useDeprecatedSynchronousErrorHandling||!a.syncErrorThrowable?(this.__tryOrUnsub(s),this.unsubscribe()):(this.__tryOrSetError(a,s),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,a){try{t.call(this._context,a)}catch(s){if(this.unsubscribe(),W.useDeprecatedSynchronousErrorHandling)throw s;pe(s)}},e.prototype.__tryOrSetError=function(t,a,s){if(!W.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{a.call(this._context,s)}catch(i){return W.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=i,t.syncErrorThrown=!0,!0):(pe(i),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(ae);function fs(n){for(;n;){var e=n,t=e.closed,a=e.destination,s=e.isStopped;if(t||s)return!1;a&&a instanceof ae?n=a:n=null}return!0}function ms(n,e,t){if(n){if(n instanceof ae)return n;if(n[Fe])return n[Fe]()}return!n&&!e&&!t?new ae(Ke):new ae(n,e,t)}var ys=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function bs(n){return n}function gs(n){return n.length===0?bs:n.length===1?n[0]:function(t){return n.reduce(function(a,s){return s(a)},t)}}var wt=function(){function n(e){this._isScalar=!1,e&&(this._subscribe=e)}return n.prototype.lift=function(e){var t=new n;return t.source=this,t.operator=e,t},n.prototype.subscribe=function(e,t,a){var s=this.operator,i=ms(e,t,a);if(s?i.add(s.call(i,this.source)):i.add(this.source||W.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),W.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},n.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){W.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),fs(e)?e.error(t):console.warn(t)}},n.prototype.forEach=function(e,t){var a=this;return t=Jt(t),new t(function(s,i){var o;o=a.subscribe(function(l){try{e(l)}catch(d){i(d),o&&o.unsubscribe()}},i,s)})},n.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},n.prototype[ys]=function(){return this},n.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?this:gs(e)(this)},n.prototype.toPromise=function(e){var t=this;return e=Jt(e),new e(function(a,s){var i;t.subscribe(function(o){return i=o},function(o){return s(o)},function(){return a(i)})})},n.create=function(e){return new n(e)},n}();function Jt(n){if(n||(n=W.Promise||Promise),!n)throw new Error("no Promise impl found");return n}var vs=function(){function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n}(),ce=vs,_s=function(n){le(e,n);function e(t,a){var s=n.call(this)||this;return s.subject=t,s.subscriber=a,s.closed=!1,s}return e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,a=t.observers;if(this.subject=null,!(!a||a.length===0||t.isStopped||t.closed)){var s=a.indexOf(this.subscriber);s!==-1&&a.splice(s,1)}}},e}(Ae),ws=function(n){le(e,n);function e(t){var a=n.call(this,t)||this;return a.destination=t,a}return e}(ae),S=function(n){le(e,n);function e(){var t=n.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype[Fe]=function(){return new ws(this)},e.prototype.lift=function(t){var a=new Kt(this,this);return a.operator=t,a},e.prototype.next=function(t){if(this.closed)throw new ce;if(!this.isStopped)for(var a=this.observers,s=a.length,i=a.slice(),o=0;o<s;o++)i[o].next(t)},e.prototype.error=function(t){if(this.closed)throw new ce;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var a=this.observers,s=a.length,i=a.slice(),o=0;o<s;o++)i[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new ce;this.isStopped=!0;for(var t=this.observers,a=t.length,s=t.slice(),i=0;i<a;i++)s[i].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(t){if(this.closed)throw new ce;return n.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){if(this.closed)throw new ce;return this.hasError?(t.error(this.thrownError),Ae.EMPTY):this.isStopped?(t.complete(),Ae.EMPTY):(this.observers.push(t),new _s(this,t))},e.prototype.asObservable=function(){var t=new wt;return t.source=this,t},e.create=function(t,a){return new Kt(t,a)},e}(wt),Kt=function(n){le(e,n);function e(t,a){var s=n.call(this)||this;return s.destination=t,s.source=a,s}return e.prototype.next=function(t){var a=this.destination;a&&a.next&&a.next(t)},e.prototype.error=function(t){var a=this.destination;a&&a.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){var a=this.source;return a?this.source.subscribe(t):Ae.EMPTY},e}(S);function h(n,e){window.parent.postMessage(n,"*",e)}let tt=0;const fe=new Map;function w(n,e){return new Promise((t,a)=>{window.parent.postMessage({id:tt,query:n},"*",e),fe.set(tt,{resolve:t,reject:a}),tt++})}class P{}let Re;const ks=new Uint8Array(16);function xs(){if(!Re&&(Re=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Re))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Re(ks)}const C=[];for(let n=0;n<256;++n)C.push((n+256).toString(16).slice(1));function Es(n,e=0){return(C[n[e+0]]+C[n[e+1]]+C[n[e+2]]+C[n[e+3]]+"-"+C[n[e+4]]+C[n[e+5]]+"-"+C[n[e+6]]+C[n[e+7]]+"-"+C[n[e+8]]+C[n[e+9]]+"-"+C[n[e+10]]+C[n[e+11]]+C[n[e+12]]+C[n[e+13]]+C[n[e+14]]+C[n[e+15]]).toLowerCase()}const Ss=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ft={randomUUID:Ss};function js(n,e,t){if(Ft.randomUUID&&!e&&!n)return Ft.randomUUID();n=n||{};const a=n.random||(n.rng||xs)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,e){t=t||0;for(let s=0;s<16;++s)e[t+s]=a[s];return e}return Es(a)}class Ps{constructor(e){this.id=e}close(){h({type:"closePopup",data:{popupId:this.id}})}}function Cs(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}class Ts{constructor(e,t){c(this,"uuid");c(this,"type");c(this,"message");c(this,"callback");var a;this.onRemove=t,this.uuid=Cs(),this.message=e.message,this.type=(a=e.type)!=null?a:"message",this.callback=e.callback,this.create().catch(s=>console.error(s))}async create(){await w({type:vn,data:{message:this.message,type:this.type,uuid:this.uuid}})}async remove(){await w({type:_n,data:{uuid:this.uuid}}),this.onRemove()}triggerCallback(){this.callback()}}const As="triggerPlayerMessage",Ms="removePlayerMessage",Is=r.enum(["message"]);r.object({message:r.string(),uuid:r.string(),type:Is});r.object({uuid:r.string()});class Ws{constructor(e,t){c(this,"uuid");c(this,"type");c(this,"message");c(this,"callback");var a;this.onRemove=t,this.uuid=window.crypto.randomUUID(),this.message=e.message,this.type=(a=e.type)!=null?a:"message",this.callback=e.callback,this.create().catch(s=>console.error(s))}async create(){await w({type:As,data:{message:this.message,type:this.type,uuid:this.uuid}})}async remove(){await w({type:Ms,data:{uuid:this.uuid}}),this.onRemove()}triggerCallback(){this.callback&&this.callback()}}class Gt{constructor(e){this.key=e}remove(){h({type:"unregisterMenu",data:{key:this.key}})}open(){h({type:"openMenu",data:{key:this.key}})}}class Xt{constructor(e,t){c(this,"website");c(this,"_vertical");c(this,"_horizontal");this.website=e,this._vertical=t.vertical,this._horizontal=t.horizontal}get vertical(){return this._vertical}set vertical(e){this._vertical=e,h({type:"modifyUIWebsite",data:{id:this.website.id,position:{vertical:this._vertical,horizontal:this._horizontal}}})}get horizontal(){return this._horizontal}set horizontal(e){this._horizontal=e,h({type:"modifyUIWebsite",data:{id:this.website.id,position:{vertical:this._vertical,horizontal:this._horizontal}}})}}class Qt{constructor(e,t){c(this,"website");c(this,"_height");c(this,"_width");this.website=e,this._height=t.height,this._width=t.width}get height(){return this._height}set height(e){this._height=e,h({type:"modifyUIWebsite",data:{id:this.website.id,size:{height:this._height,width:this._width}}})}get width(){return this._height}set width(e){this._width=e,h({type:"modifyUIWebsite",data:{id:this.website.id,size:{height:this._height,width:this._width}}})}}class er{constructor(e,t){c(this,"website");c(this,"_top");c(this,"_bottom");c(this,"_left");c(this,"_right");this.website=e,this._top=t.top,this._bottom=t.bottom,this._left=t.left,this._right=t.right}get top(){return this._top}set top(e){this._top=e,h({type:"modifyUIWebsite",data:{id:this.website.id,margin:{top:this._top}}})}get bottom(){return this._bottom}set bottom(e){this._bottom=e,h({type:"modifyUIWebsite",data:{id:this.website.id,margin:{bottom:this._bottom}}})}get left(){return this._left}set left(e){this._left=e,h({type:"modifyUIWebsite",data:{id:this.website.id,margin:{left:this._left}}})}get right(){return this._right}set right(e){this._right=e,h({type:"modifyUIWebsite",data:{id:this.website.id,margin:{right:this._right}}})}}class rt{constructor(e){c(this,"id");c(this,"_url");c(this,"_visible");c(this,"_allowPolicy");c(this,"_allowApi");c(this,"_position");c(this,"_size");c(this,"_margin");var t,a,s,i;this.id=e.id,this._url=e.url,this._visible=(t=e.visible)!=null?t:!0,this._allowPolicy=(a=e.allowPolicy)!=null?a:"",this._allowApi=(s=e.allowApi)!=null?s:!1,this._position=new Xt(this,e.position),this._size=new Qt(this,e.size),this._margin=new er(this,(i=e.margin)!=null?i:{})}get url(){return this._url}set url(e){this._url=e,h({type:"modifyUIWebsite",data:{id:this.id,url:this._url}})}get visible(){return this._visible}set visible(e){this._visible=e,h({type:"modifyUIWebsite",data:{id:this.id,visible:this._visible}})}get allowPolicy(){return this._allowPolicy}get allowApi(){return this._allowApi}get position(){return this._position}set position(e){this._position=new Xt(this,e),h({type:"modifyUIWebsite",data:{id:this.id,position:{vertical:this._position.vertical,horizontal:this._position.horizontal}}})}get size(){return this._size}set size(e){this._size=new Qt(this,e),h({type:"modifyUIWebsite",data:{id:this.id,size:{height:this._size.height,width:this._size.width}}})}get margin(){return this._margin}set margin(e){this._margin=new er(this,e),h({type:"modifyUIWebsite",data:{id:this.id,margin:{top:this._margin.top,bottom:this._margin.bottom,left:this._margin.left,right:this._margin.right}}})}close(){return w({type:"closeUIWebsite",data:this.id})}}class Rs extends P{constructor(){super(...arguments);c(this,"callbacks",[])}async open(t){const a=await w({type:"openUIWebsite",data:t});return new rt(a)}async getAll(){return(await w({type:"getUIWebsites",data:void 0})).map(a=>new rt(a))}async getById(t){const a=await w({type:"getUIWebsiteById",data:t});return new rt(a)}}const Os=new Rs;class Zs extends P{constructor(){super(...arguments);c(this,"_closeCallback");c(this,"callbacks",[E({type:"modalCloseTrigger",callback:t=>{this._closeCallback&&this._closeCallback(t)}})])}openModal(t,a){this._closeCallback=a,h({type:"openModal",data:t})}closeModal(){this._closeCallback=void 0,h({type:"closeModal",data:void 0})}}const Us=new Zs;class Ls extends P{constructor(){super(...arguments);c(this,"_callbacks",new Map);c(this,"callbacks",[E({type:"buttonActionBarTrigger",callback:t=>{this._callbacks.has(t.id)&&this._callbacks.get(t.id)(t)}})])}addButton(t){t.callback!=null&&this._callbacks.set(t.id,t.callback);const a=jr.safeParse(t);a.success&&a.data.type==="button"&&h({type:"addButtonActionBar",data:{id:a.data.id,label:a.data.label,type:a.data.type}});const s=Pr.safeParse(t);s.success&&s.data.type==="action"&&h({type:"addButtonActionBar",data:{id:s.data.id,type:s.data.type,imageSrc:s.data.imageSrc,toolTip:s.data.toolTip}})}removeButton(t){this._callbacks.delete(t),h({type:"removeButtonActionBar",data:{id:t}})}}const Ns=new Ls;class Vs extends P{constructor(){super(...arguments);c(this,"callbacks",[])}openBanner(t){h({type:"openBanner",data:t})}closeBanner(){h({type:"closeBanner"})}}const Bs=new Vs;let de=0;const tr=new Map,rr=new Map,ar=new Map,nr=new Map,at=new Map,nt=new Map;class zs{constructor(e,t,a){c(this,"remotePlayer");c(this,"key");c(this,"callback");this.remotePlayer=e,this.key=t,this.callback=a}call(){this.callback()}remove(){this.remotePlayer.removeAction(this.key)}}class Ds extends P{constructor(){super();c(this,"_onRemotePlayerClicked");c(this,"onRemotePlayerClicked");c(this,"currentlyClickedRemotePlayer");c(this,"callbacks",[E({type:"buttonClickedEvent",callback:t=>{var i;const a=(i=rr.get(t.popupId))==null?void 0:i.get(t.buttonId),s=tr.get(t.popupId);if(s===void 0)throw new Error('Could not find popup with ID "'+t.popupId+'"');a&&a(s)}}),E({type:"menuItemClicked",callback:t=>{const a=nr.get(t.menuItem);if(ar.get(t.menuItem)===void 0)throw new Error('Could not find menu named "'+t.menuItem+'"');a&&a(t.menuItem)}}),E({type:"messageTriggered",callback:t=>{const a=at.get(t.uuid);a&&a.triggerCallback();const s=nt.get(t.uuid);s&&s.triggerCallback()}}),E({type:"remotePlayerClickedEvent",callback:t=>{const a=new H(t);this.currentlyClickedRemotePlayer=a,this._onRemotePlayerClicked.next(a)}}),E({type:"actionsMenuActionClickedEvent",callback:t=>{var a;(a=this.currentlyClickedRemotePlayer)==null||a.callAction(t.actionName)}})]);this._onRemotePlayerClicked=new S,this.onRemotePlayerClicked=this._onRemotePlayerClicked.asObservable()}openPopup(t,a,s){de++;const i=new Ps(de),o=new Map;rr.set(de,o);let l=0;for(const d of s){const p=d.callback;p&&o.set(l,()=>{p(i)}),l++}return h({type:"openPopup",data:{popupId:de,targetObject:t,message:a,buttons:s.map(d=>({label:d.label,className:d.className}))}}),tr.set(de,i),i}registerMenuCommand(t,a){var o;typeof a=="function"&&(a={callback:a});const s={...a,allowApi:a.allowApi===void 0?a.iframe!==void 0:a.allowApi,key:(o=a.key)!=null?o:js()},i=new Gt(s.key);if(s.iframe!==void 0)h({type:"registerMenu",data:{name:t,iframe:s.iframe,key:s.key,options:{allowApi:s.allowApi}}});else if(s.callback!==void 0)nr.set(s.key,s.callback),h({type:"registerMenu",data:{name:t,key:s.key,options:{allowApi:s.allowApi}}});else throw new Error("When adding a menu with WA.ui.registerMenuCommand, you must pass either an iframe or a callback");return ar.set(s.key,i),i}getMenuCommand(t){return Promise.resolve(new Gt(t))}addActionsMenuKeyToRemotePlayer(t,a){h({type:"addActionsMenuKeyToRemotePlayer",data:{id:t,actionKey:a}})}removeActionsMenuKeyFromRemotePlayer(t,a){h({type:"removeActionsMenuKeyFromRemotePlayer",data:{id:t,actionKey:a}})}displayBubble(){h({type:"displayBubble",data:void 0})}removeBubble(){h({type:"removeBubble",data:void 0})}displayActionMessage(t){const a=new Ts(t,()=>{at.delete(a.uuid)});return at.set(a.uuid,a),a}displayPlayerMessage(t){const a=new Ws(t,()=>{nt.delete(a.uuid)});return nt.set(a.uuid,a),a}get website(){return Os}get modal(){return Us}get actionBar(){return Ns}get banner(){return Bs}}const Oe=new Ds;class H{constructor(e){c(this,"_playerId");c(this,"_name");c(this,"_userUuid");c(this,"_availabilityStatus");c(this,"_outlineColor");c(this,"_position");c(this,"_variables",{});c(this,"_variablesSubjects",{});c(this,"state");c(this,"actions",new Map);c(this,"_position$",new S);c(this,"position$",this._position$.asObservable());this._playerId=e.playerId,this._name=e.name,this._userUuid=e.userUuid,this._availabilityStatus=e.availabilityStatus,this._outlineColor=e.outlineColor,this._position=e.position,this._variables=Object.fromEntries(e.variables);const t=this._variablesSubjects,a=this._variables;this.state=new Proxy({onVariableChange(s){let i=t[s];return i===void 0&&(i=new S,t[s]=i),i.asObservable()}},{get(s,i,o){return i in s?Reflect.get(s,i,o):a[i.toString()]},has(s,i){return i in s?!0:i.toString()in a}})}get playerId(){return this._playerId}get name(){return this._name}get uuid(){return this._userUuid}get outlineColor(){return this._outlineColor}get position(){return this._position}set position(e){this._position=e,this._position$.next(e)}destroy(){this._position$.complete();for(const e of Object.values(this._variablesSubjects))e==null||e.complete()}setVariable(e,t){this._variables[e]=t;const a=this._variablesSubjects[e];a&&a.next(t)}addAction(e,t){const a=new zs(this,e,t);return this.actions.set(e,a),h({type:"addActionsMenuKeyToRemotePlayer",data:{id:this._playerId,actionKey:e}}),a}callAction(e){const t=this.actions.get(e);t&&t.call()}removeAction(e){this.actions.delete(e),h({type:"removeActionsMenuKeyFromRemotePlayer",data:{id:this._playerId,actionKey:e}})}sendEvent(e,t){return w({type:"dispatchEvent",data:{name:e,data:t,targetUserIds:[this._playerId]}})}}class $s extends P{constructor(){super(...arguments);c(this,"trackingPlayers",!1);c(this,"trackingMovement",!1);c(this,"sharedPlayersVariableStream",{});c(this,"remotePlayers",new Map);c(this,"_newRemotePlayersStream",new S);c(this,"newRemotePlayersStream",this._newRemotePlayersStream.asObservable());c(this,"_removeRemotePlayersStream",new S);c(this,"removeRemotePlayersStream",this._removeRemotePlayersStream.asObservable());c(this,"_playersMovedStream",new S);c(this,"playersMovedStream",this._playersMovedStream.asObservable());c(this,"callbacks",[E({type:"setSharedPlayerVariable",callback:t=>{const a=this.remotePlayers.get(t.playerId);if(a===void 0){console.warn(`Received a variable message for a player that isn't connected. Did you forget to call "WA.players.configureTracking()"?. Ignoring.`,t);return}a.setVariable(t.key,t.value);const s=this.sharedPlayersVariableStream[t.key];s&&s.next({player:a,value:t.value})}}),E({type:"addRemotePlayer",callback:t=>{this.registerRemotePlayer(t)}}),E({type:"removeRemotePlayer",callback:t=>{const a=this.remotePlayers.get(t);a===void 0?console.warn("Could not find remote player to delete: ",t):(this.remotePlayers.delete(t),this._removeRemotePlayersStream.next(a),a.destroy())}}),E({type:"remotePlayerChanged",callback:t=>{const a=this.remotePlayers.get(t.playerId);if(a===void 0){console.warn("Could not find remote player with ID : ",t.playerId);return}if(t.position){const s=a.position;a.position=t.position,this._playersMovedStream.next({player:a,newPosition:t.position,oldPosition:s})}}})])}registerRemotePlayer(t){const a=new H(t);this.remotePlayers.set(t.playerId,a),this._newRemotePlayersStream.next(a)}async configureTracking(t){var o,l;const a=(o=t==null?void 0:t.players)!=null?o:!0,s=(l=t==null?void 0:t.movement)!=null?l:!0;if(a===this.trackingPlayers&&s===this.trackingMovement)return;this.trackingPlayers=a,this.trackingMovement=s;const i=await w({type:"enablePlayersTracking",data:{players:this.trackingPlayers,movement:this.trackingMovement}});if(a)for(const d of i)this.registerRemotePlayer(d)}onVariableChange(t){let a=this.sharedPlayersVariableStream[t];return a||(a=new S,this.sharedPlayersVariableStream[t]=a),a.asObservable()}get onPlayerEnters(){if(!this.trackingPlayers)throw new Error("Cannot call WA.players.onPlayerEnters. You forgot to call WA.players.configureTracking() first.");return this.newRemotePlayersStream}get onPlayerLeaves(){if(!this.trackingPlayers)throw new Error("Cannot call WA.players.onPlayerLeaves. You forgot to call WA.players.configureTracking() first.");return this.removeRemotePlayersStream}get onPlayerMoves(){if(!this.trackingMovement)throw new Error("Cannot call WA.players.onPlayerMoves(). You forgot to call WA.players.configureTracking() first.");return this.playersMovedStream}get(t){return this.remotePlayers.get(t)}list(){return this.remotePlayers.values()}}const Wr=new $s,sr=new S;class qs extends P{constructor(){super(...arguments);c(this,"callbacks",[E({callback:t=>{sr.next(t)},type:"userInputChat"})])}open(){h({type:"openChat",data:void 0})}close(){h({type:"closeChat",data:void 0})}sendChatMessage(t,a){typeof a=="string"?a={scope:"local",author:a}:a===void 0&&(a={scope:"local"}),h({type:"chat",data:{message:t,options:a}})}startTyping(t){t.scope==="bubble"?h({type:"newChatMessageWritingStatus",data:He.userWriting}):h({type:"startWriting",data:{author:t.author}})}stopTyping(t){t.scope==="bubble"?h({type:"newChatMessageWritingStatus",data:He.userStopWriting}):h({type:"stopWriting",data:{author:t.author}})}onChatMessage(t,a){const s=a!=null?a:{scope:"local"};return sr.subscribe(i=>{s.scope==="local"&&i.senderId!==void 0||s.scope==="bubble"&&i.senderId===void 0||t(i.message,{authorId:i.senderId,author:i.senderId?Wr.get(i.senderId):void 0})})}}const st=new qs;class ir{constructor(e){this.id=e}close(){return w({type:"closeCoWebsite",data:this.id})}}class Ys extends P{constructor(){super(...arguments);c(this,"callbacks",[])}openTab(t){h({type:"openTab",data:{url:t}})}goToPage(t){h({type:"goToPage",data:{url:t}})}goToRoom(t){h({type:"loadPage",data:{url:t}})}async openCoWebSite(t,a,s,i,o,l,d){const p=await w({type:"openCoWebsite",data:{url:t,allowApi:a,allowPolicy:s,widthPercent:i,position:o,closable:l,lazy:d}});return new ir(p.id)}async getCoWebSites(){return(await w({type:"getCoWebsites",data:void 0})).map(a=>new ir(a.id))}closeCoWebSite(){return w({type:"closeCoWebsites",data:void 0})}goToLogin(){return w({type:"goToLogin",data:void 0})}}const X=new Ys;class Hs extends P{constructor(){super(...arguments);c(this,"callbacks",[])}disablePlayerControls(){h({type:"disablePlayerControls",data:void 0})}restorePlayerControls(){h({type:"restorePlayerControls",data:void 0})}turnOffMicrophone(){h({type:"turnOffMicrophone",data:void 0})}turnOffWebcam(){h({type:"turnOffWebcam",data:void 0})}disableMicrophone(){h({type:"disableMicrophone",data:void 0})}restoreMicrophone(){h({type:"restoreMicrophone",data:void 0})}disableWebcam(){h({type:"disableWebcam",data:void 0})}restoreWebcam(){h({type:"restoreWebcam",data:void 0})}disablePlayerProximityMeeting(){h({type:"disablePlayerProximityMeeting",data:void 0})}restorePlayerProximityMeeting(){h({type:"restorePlayerProximityMeeting",data:void 0})}disableMapEditor(){h({type:"disableMapEditor",data:void 0})}restoreMapEditor(){h({type:"restoreMapEditor",data:void 0})}disableScreenSharing(){h({type:"disableScreenSharing",data:void 0})}restoreScreenSharing(){h({type:"restoreScreenSharing",data:void 0})}disableWheelZoom(){h({type:"disableWheelZoom",data:void 0})}restoreWheelZoom(){h({type:"restoreWheelZoom",data:void 0})}disableRightClick(){h({type:"disableRightClick",data:void 0})}restoreRightClick(){h({type:"restoreRightClick",data:void 0})}disableInviteButton(){h({type:"disableInviteUserButton",data:void 0})}restoreInviteButton(){h({type:"restoreInviteUserButton",data:void 0})}disableRoomList(){h({type:"disableRoomList",data:void 0})}restoreRoomList(){h({type:"restoreRoomList",data:void 0})}}const it=new Hs;class Js{constructor(e){this.url=e,h({type:"loadSound",data:{url:this.url}})}play(e){return h({type:"playSound",data:{url:this.url,config:e}}),this.url}stop(){return h({type:"stopSound",data:{url:this.url}}),this.url}}class Ks extends P{constructor(){super(...arguments);c(this,"callbacks",[])}loadSound(t){return new Js(t)}}const or=new Ks;class Fs{constructor(){c(this,"receivedEventResolvers",new S);c(this,"eventSubscribers",new Map);this.receivedEventResolvers.subscribe(e=>{const t=this.eventSubscribers.get(e.name);t!==void 0&&t.next(e)})}on(e){let t=this.eventSubscribers.get(e);return t===void 0&&(t=new S,this.eventSubscribers.set(e,t)),t.asObservable()}}class Gs extends Fs{constructor(){super();c(this,"callbacks",[E({type:"receiveEvent",callback:t=>{this.receivedEventResolvers.next(t)}})])}broadcast(t,a){return w({type:"dispatchEvent",data:{name:t,data:a}})}}const Xs=new Gs;class lr{constructor(e){c(this,"name");c(this,"_url");c(this,"_visible");c(this,"_position");c(this,"_scale");var t,a;this.config=e,this.name=e.name,this._url=e.url,this._visible=(t=e.visible)!=null?t:!0,this._position=e.position,this._scale=(a=e.scale)!=null?a:1}get url(){return this._url}set url(e){this._url=e,h({type:"modifyEmbeddedWebsite",data:{name:this.name,url:this._url}})}get visible(){return this._visible}set visible(e){this._visible=e,h({type:"modifyEmbeddedWebsite",data:{name:this.name,visible:this._visible}})}get x(){return this._position.x}set x(e){this._position.x=e,h({type:"modifyEmbeddedWebsite",data:{name:this.name,x:this._position.x}})}get y(){return this._position.y}set y(e){this._position.y=e,h({type:"modifyEmbeddedWebsite",data:{name:this.name,y:this._position.y}})}get width(){return this._position.width}set width(e){this._position.width=e,h({type:"modifyEmbeddedWebsite",data:{name:this.name,width:this._position.width}})}get height(){return this._position.height}set height(e){this._position.height=e,h({type:"modifyEmbeddedWebsite",data:{name:this.name,height:this._position.height}})}get scale(){return this._scale}set scale(e){this._scale=e,h({type:"modifyEmbeddedWebsite",data:{name:this.name,scale:this._scale}})}}class Qs extends P{constructor(){super(...arguments);c(this,"callbacks",[])}async get(t){const a=await w({type:"getEmbeddedWebsite",data:t});return new lr(a)}create(t){return w({type:"createEmbeddedWebsite",data:t}).catch(a=>{console.error(a)}),new lr(t)}async delete(t){return await w({type:"deleteEmbeddedWebsite",data:t})}}const ei=new Qs;class cr{constructor(e){c(this,"config");c(this,"name");c(this,"type","area");c(this,"class","area");c(this,"_x");c(this,"_y");c(this,"_width");c(this,"_height");this.config=e,this.name=e.name,this._x=e.x,this._y=e.y,this._width=e.width,this._height=e.height}setProperty(e,t){h({type:"setAreaProperty",data:{areaName:this.name,propertyName:e,propertyValue:t}})}get x(){return this._x}set x(e){this._x=e,h({type:"modifyArea",data:{name:this.name,x:this._x}})}set y(e){this._y=e,h({type:"modifyArea",data:{name:this.name,y:this._y}})}get y(){return this._y}set width(e){this._width=e,h({type:"modifyArea",data:{name:this.name,width:this._width}})}get width(){return this._width}set height(e){this._height=e,h({type:"modifyArea",data:{name:this.name,height:this._height}})}get height(){return this._height}}const Ze=new Map,Ue=new Map;class ti extends P{constructor(){super(...arguments);c(this,"callbacks",[E({type:"enterAreaEvent",callback:t=>{var a;(a=Ze.get(t.name))==null||a.next()}}),E({type:"leaveAreaEvent",callback:t=>{var a;(a=Ue.get(t.name))==null||a.next()}})])}create(t){return w({type:"createArea",data:t}),new cr(t)}async get(t){const a=await w({type:"getArea",data:t});return new cr(a)}async delete(t){await w({type:"deleteArea",data:t}),Ze.delete(t),Ue.delete(t)}onEnter(t){let a=Ze.get(t);return a===void 0&&(a=new S,Ze.set(t,a)),a.asObservable()}onLeave(t){let a=Ue.get(t);return a===void 0&&(a=new S,Ue.set(t,a)),a.asObservable()}}const ri=new ti,ot=new Map,lt=new Map,ct=new Map,dt=new Map;let kt;const ai=n=>{kt=n};let xt;const ni=n=>{xt=n};let Et;const si=n=>{Et=n};class ii extends P{constructor(){super(...arguments);c(this,"callbacks",[E({callback:t=>{var a;(a=ot.get(t.name))==null||a.next()},type:"enterEvent"}),E({type:"leaveEvent",callback:t=>{var a;(a=lt.get(t.name))==null||a.next()}}),E({type:"enterLayerEvent",callback:t=>{var a;(a=ct.get(t.name))==null||a.next()}}),E({type:"leaveLayerEvent",callback:t=>{var a;(a=dt.get(t.name))==null||a.next()}})])}onEnterZone(t,a){let s=ot.get(t);return s===void 0&&(s=new S,ot.set(t,s)),s.subscribe(a)}onLeaveZone(t,a){let s=lt.get(t);return s===void 0&&(s=new S,lt.set(t,s)),s.subscribe(a)}onEnterLayer(t){let a=ct.get(t);return a===void 0&&(a=new S,ct.set(t,a)),a.asObservable()}onLeaveLayer(t){let a=dt.get(t);return a===void 0&&(a=new S,dt.set(t,a)),a.asObservable()}showLayer(t){h({type:"showLayer",data:{name:t}})}hideLayer(t){h({type:"hideLayer",data:{name:t}})}setProperty(t,a,s){h({type:"setProperty",data:{layerName:t,propertyName:a,propertyValue:s}})}async getTiledMap(){return(await w({type:"getMapData",data:void 0})).data}setTiles(t){h({type:"setTiles",data:t})}get id(){if(kt===void 0)throw new Error("Room id not initialized yet. You should call WA.room.id within a WA.onInit callback.");return kt}get mapURL(){if(Et===void 0)throw new Error("mapURL is not initialized yet. You should call WA.room.mapURL within a WA.onInit callback.");return Et}get hashParameters(){if(xt===void 0)throw new Error("hashParameters is not initialized yet. You should call WA.room.hashParameters within a WA.onInit callback.");return xt}async loadTileset(t){return await w({type:"loadTileset",data:{url:t}})}get website(){return ei}get area(){return ri}}const ut=new ii;class Rr{constructor(){c(this,"setVariableResolvers",new S);c(this,"variables",{});c(this,"variableSubscribers",{});this.setVariableResolvers.subscribe(e=>{this.variables[e.key]=e.value;const t=this.variableSubscribers[e.key];t!==void 0&&t.next(e.value)})}initVariables(e){for(const[t,a]of e.entries())t in this.variables||(this.variables[t]=a)}loadVariable(e){return this.variables[e]}hasVariable(e){return e in this.variables}onVariableChange(e){let t=this.variableSubscribers[e];return t===void 0&&(t=new S,this.variableSubscribers[e]=t),t.asObservable()}}class oi extends Rr{constructor(){super();c(this,"callbacks",[E({type:"setVariable",callback:t=>{this.setVariableResolvers.next(t)}})])}saveVariable(t,a){if(this.variables[t]===a&&typeof a!="object")return Promise.resolve();this.variables[t]=a;const s=this.variableSubscribers[t];return s&&s.next(a),w({type:"setVariable",data:{key:t,value:a}})}}function li(){return new Proxy(new oi,{get(n,e,t){return e in n?Reflect.get(n,e,t):n.loadVariable(e.toString())},set(n,e,t,a){return n.saveVariable(e.toString(),t).catch(s=>console.error(s)),!0},has(n,e){return e in n?!0:n.hasVariable(e.toString())}})}class ci extends Rr{constructor(){super();c(this,"callbacks",[E({type:"setPlayerVariable",callback:t=>{this.setVariableResolvers.next(t)}})])}saveVariable(t,a,s){var o,l,d,p;if(s&&s.ttl!==void 0&&!s.persist)throw new Error("A variable that has a ttl set must be persisted with 'persist = true'");if(s&&s.scope==="world"&&!s.persist)throw new Error("A variable that has a 'world' scope must be persisted with 'persist = true'");this.variables[t]=a;const i=this.variableSubscribers[t];return i&&i.next(a),w({type:"setPlayerVariable",data:{key:t,value:a,public:(o=s==null?void 0:s.public)!=null?o:!1,ttl:(l=s==null?void 0:s.ttl)!=null?l:void 0,persist:(d=s==null?void 0:s.persist)!=null?d:!0,scope:(p=s==null?void 0:s.scope)!=null?p:"world"}})}}const di=new Proxy(new ci,{get(n,e,t){return e in n?Reflect.get(n,e,t):n.loadVariable(e.toString())},set(n,e,t,a){return n.saveVariable(e.toString(),t).catch(s=>console.error(s)),!0},has(n,e){return e in n?!0:n.hasVariable(e.toString())}});class ui{appendAudioData(e){return w({type:"appendPCMData",data:{data:e}},[e.buffer])}async resetAudioBuffer(){await w({type:"resetAudioBuffer",data:void 0})}close(){return w({type:"stopStreamInBubble",data:void 0})}}class hi extends P{constructor(){super(...arguments);c(this,"joinStream");c(this,"participantJoinStream");c(this,"participantLeaveStream");c(this,"followedStream");c(this,"unfollowedStream");c(this,"leaveStream");c(this,"pcmDataStream",new S);c(this,"callbacks",[E({type:"joinProximityMeetingEvent",callback:t=>{var a;(a=this.joinStream)==null||a.next(t.users.map(s=>new H(s)))}}),E({type:"participantJoinProximityMeetingEvent",callback:t=>{var a;(a=this.participantJoinStream)==null||a.next(new H(t.user))}}),E({type:"participantLeaveProximityMeetingEvent",callback:t=>{var a;(a=this.participantLeaveStream)==null||a.next(new H(t.user))}}),E({type:"leaveProximityMeetingEvent",callback:()=>{var t;(t=this.leaveStream)==null||t.next()}}),E({type:"onFollowed",callback:t=>{var a;(a=this.followedStream)==null||a.next(new H(t.user))}}),E({type:"onUnfollowed",callback:t=>{var a;(a=this.unfollowedStream)==null||a.next(new H(t.user))}}),E({type:"appendPCMData",callback:t=>{this.pcmDataStream.next(t.data)}})])}onJoin(){return this.joinStream===void 0&&(this.joinStream=new S),this.joinStream}onParticipantJoin(){return this.participantJoinStream===void 0&&(this.participantJoinStream=new S),this.participantJoinStream}onParticipantLeave(){return this.participantLeaveStream===void 0&&(this.participantLeaveStream=new S),this.participantLeaveStream}onLeave(){return this.leaveStream===void 0&&(this.leaveStream=new S),this.leaveStream}async playSound(t){await w({type:"playSoundInBubble",data:{url:t}})}async startAudioStream(t){return await w({type:"startStreamInBubble",data:{sampleRate:t}}),new ui}listenToAudioStream(t){return new wt(a=>{h({type:"startListeningToStreamInBubble",data:{sampleRate:t}});const s=this.pcmDataStream.subscribe(a);return()=>{s.unsubscribe(),h({type:"stopListeningToStreamInBubble",data:void 0})}})}async followMe(){await w({type:"followMe",data:void 0})}async stopLeading(){await w({type:"stopLeading",data:void 0})}onFollowed(){return this.followedStream===void 0&&(this.followedStream=new S),this.followedStream}onUnfollowed(){return this.unfollowedStream===void 0&&(this.unfollowedStream=new S),this.unfollowedStream}}const dr=new S;let St;const pi=n=>{St=n};let jt;const fi=n=>{jt=n};let Pt;const mi=n=>{Pt=n};let Ct;const yi=n=>{Ct=n};let Tt;const bi=n=>{Tt=n};let me;const gi=n=>{me=n};let At;const vi=n=>{At=n===!0};class _i extends P{constructor(){super(...arguments);c(this,"state",di);c(this,"_proximityMeeting",new hi);c(this,"callbacks",[E({type:"hasPlayerMoved",callback:t=>{dr.next(t)}})])}get name(){if(St===void 0)throw new Error("Player name not initialized yet. You should call WA.player.name within a WA.onInit callback.");return St}get id(){if(me===void 0)throw new Error("Player id not initialized yet. You should call WA.player.id within a WA.onInit callback.");return me}get playerId(){if(Tt===void 0)throw new Error("Player id not initialized yet. You should call WA.player.playerId within a WA.onInit callback.");return Tt}get uuid(){if(me===void 0)throw new Error("Player id not initialized yet. You should call WA.player.uuid within a WA.onInit callback.");return me}get language(){if(jt===void 0)throw new Error("Player language not initialized yet. You should call WA.player.language within a WA.onInit callback.");return jt}get tags(){if(Pt===void 0)throw new Error("Tags not initialized yet. You should call WA.player.tags within a WA.onInit callback.");return Pt}async getPosition(){return await w({type:"getPlayerPosition",data:void 0})}onPlayerMove(t){const a=dr.subscribe(t);return h({type:"onPlayerMove",data:void 0}),a}async moveTo(t,a,s){return await w({type:"movePlayerTo",data:{x:t,y:a,speed:s}})}async teleport(t,a){return await w({type:"teleportPlayerTo",data:{x:t,y:a}})}get userRoomToken(){if(Ct===void 0)throw new Error("User-room token not initialized yet. You should call WA.player.userRoomToken within a WA.onInit callback.");return Ct}setOutlineColor(t,a,s){return w({type:"setPlayerOutline",data:{red:t,green:a,blue:s}})}removeOutlineColor(){return w({type:"removePlayerOutline",data:void 0})}get proximityMeeting(){return this._proximityMeeting}get isLogged(){if(At===void 0)throw new Error("IsLogged not initialized yet. You should call WA.player.isLogged within a WA.onInit callback.");return At}getWokaPicture(){return w({type:"getWoka",data:void 0})}}const Or=new _i,ur=new S;class wi extends P{constructor(){super(...arguments);c(this,"callbacks",[E({type:"wasCameraUpdated",callback:t=>{ur.next(t)}})])}followPlayer(t=!1,a){h({type:"cameraFollowPlayer",data:{smooth:t,duration:a}})}set(t,a,s,i,o=!1,l=!1,d){h({type:"cameraSet",data:{x:t,y:a,width:s,height:i,lock:o,smooth:l,duration:d}})}onCameraUpdate(){return h({type:"onCameraUpdate",data:void 0}),ur.asObservable()}}const ki=new wi;function xi(n){const e=n.properties.find(t=>t.type==="areaDescriptionProperties");return{id:n.id,name:n.name,description:e==null?void 0:e.description,searchable:e==null?void 0:e.searchable,x:n.x,y:n.y,width:n.width,height:n.height}}const ht=new Map,pt=new Map;class Ei extends P{constructor(){super(...arguments);c(this,"callbacks",[E({type:"enterMapEditorAreaEvent",callback:t=>{var a;(a=ht.get(t.name))==null||a.next()}}),E({type:"leaveMapEditorAreaEvent",callback:t=>{var a;(a=pt.get(t.name))==null||a.next()}})]);c(this,"wamMapCache")}onEnter(t){let a=ht.get(t);return a===void 0&&(a=new S,ht.set(t,a)),a.asObservable()}onLeave(t){let a=pt.get(t);return a===void 0&&(a=new S,pt.set(t,a)),a.asObservable()}getWamMap(){return this.wamMapCache?this.wamMapCache:(this.wamMapCache=w({type:"getWamMapData",data:void 0}).then(t=>t.data),this.wamMapCache)}async list(){const t=await this.getWamMap();if(t===void 0)throw new Error("This is a public map. The map editor is not available on public maps.");return t.areas.map(xi)}}const Si=new Ei;class ji extends P{constructor(){super(...arguments);c(this,"callbacks",[])}get area(){return Si}}const Pi=new ji,Zr=li();let Ur,Lr;const Ci=n=>{Ur=n},Ti=n=>{Lr=n},Ai=w({type:"getState",data:void 0}).then(n=>{bi(n.playerId),pi(n.nickname),fi(n.language),ai(n.roomId),ni(n.hashParameters),si(n.mapUrl),mi(n.tags),gi(n.uuid),yi(n.userRoomToken),Ci(n.metadata),Ti(n.iframeId),Zr.initVariables(n.variables),Or.state.initVariables(n.playerVariables),vi(n.isLogged)}),Mi={ui:Oe,nav:X,controls:it,chat:st,sound:or,room:ut,player:Or,players:Wr,camera:ki,state:Zr,event:Xs,mapEditor:Pi,onInit(){return Ai},get metadata(){return Ur},get iframeId(){return Lr},sendChatMessage(n,e){console.warn("Method WA.sendChatMessage is deprecated. Please use WA.chat.sendChatMessage instead"),st.sendChatMessage(n,e)},disablePlayerControls(){console.warn("Method WA.disablePlayerControls is deprecated. Please use WA.controls.disablePlayerControls instead"),it.disablePlayerControls()},restorePlayerControls(){console.warn("Method WA.restorePlayerControls is deprecated. Please use WA.controls.restorePlayerControls instead"),it.restorePlayerControls()},displayBubble(){console.warn("Method WA.displayBubble is deprecated. Please use WA.ui.displayBubble instead"),Oe.displayBubble()},removeBubble(){console.warn("Method WA.removeBubble is deprecated. Please use WA.ui.removeBubble instead"),Oe.removeBubble()},openTab(n){console.warn("Method WA.openTab is deprecated. Please use WA.nav.openTab instead"),X.openTab(n)},loadSound(n){return console.warn("Method WA.loadSound is deprecated. Please use WA.sound.loadSound instead"),or.loadSound(n)},goToPage(n){console.warn("Method WA.goToPage is deprecated. Please use WA.nav.goToPage instead"),X.goToPage(n)},goToRoom(n){console.warn("Method WA.goToRoom is deprecated. Please use WA.nav.goToRoom instead"),X.goToRoom(n)},openCoWebSite(n,e=!1,t=""){return console.warn("Method WA.openCoWebSite is deprecated. Please use WA.nav.openCoWebSite instead"),X.openCoWebSite(n,e,t)},closeCoWebSite(){return console.warn("Method WA.closeCoWebSite is deprecated. Please use WA.nav.closeCoWebSite instead"),X.closeCoWebSite()},openPopup(n,e,t){return console.warn("Method WA.openPopup is deprecated. Please use WA.ui.openPopup instead"),Oe.openPopup(n,e,t)},onChatMessage(n){console.warn("Method WA.onChatMessage is deprecated. Please use WA.chat.onChatMessage instead"),st.onChatMessage(n)},onEnterZone(n,e){console.warn("Method WA.onEnterZone is deprecated. Please use WA.room.onEnterZone instead"),ut.onEnterZone(n,e)},onLeaveZone(n,e){console.warn("Method WA.onLeaveZone is deprecated. Please use WA.room.onLeaveZone instead"),ut.onLeaveZone(n,e)}};window.WA=Mi;window.addEventListener("message",n=>{if(n.source!==window.parent)return;const e=n.data,t=ds.safeParse(e);if(t.success){const a=t.data,s=a.id,i=a.error,o=fe.get(s);if(o===void 0)throw new Error("In Iframe API, got an error answer for a question that we have no track of.");o.reject(new Error(i)),fe.delete(s)}else if(cs(e)){const a=e.id,s=e.data,i=fe.get(a);if(i===void 0)throw new Error("In Iframe API, got an answer for a question that we have no track of.");i.resolve(s),fe.delete(a)}else{const a=os.safeParse(e);if(a.success){const s=a.data,i=Le[s.type];if(i===void 0)throw new Error('Missing event handler for event of type "'+s.type+"'");for(const o of i)o==null||o(s.data)}else if(ls.safeParse(e).success)throw new Error("Could not parse message received from WorkAdventure. Message:"+JSON.stringify(e))}});
//# sourceMappingURL=iframe_api.js.map
